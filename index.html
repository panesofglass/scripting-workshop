<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>The Agony and the Ecstasy of F# Scripting</title>
    <meta name="description" content="Discover the wonderful world of F# scripting, including its agonies and ecstasies. We'll work through building a simple application starting with a script and moving to the relevant library and test projects and discuss strategies for managing app settings and connection strings, as well as how to access command line arguments.">
    <meta name="author" content="Ryan Riley">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="//code.jquery.com/jquery-1.8.0.js"></script>
    <script src="//code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/night.css" id="theme">
    <link type="text/css" rel="stylesheet" href="fsharp.formatting/styles/style.css" />
    <link type="text/css" rel="stylesheet" href="fsharp.formatting/styles/deedle.css" />
    <link type="text/css" rel="stylesheet" href="css/custom.css" />
    <script src="fsharp.formatting/styles/tips.js" type="text/javascript"></script>
    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <link rel="stylesheet" href="css/fsreveal.css">
    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
    </script>
    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
    <script language="javascript" type="text/javascript">
        function init()
        {
            websocket = new WebSocket("ws://"+window.location.host+"/websocket");
            websocket.onmessage = function(evt) { location.reload(); };
        }
        window.addEventListener("load", init, false);
    </script>
</head>
<body>
    <div class="reveal">
        <div class="tip" id="fs1">namespace System</div>
<div class="tip" id="fs2">val originalCwd : string<br /><br />Full name: Index.originalCwd</div>
<div class="tip" id="fs3">type Environment =<br />&#160;&#160;static member CommandLine : string<br />&#160;&#160;static member CurrentDirectory : string with get, set<br />&#160;&#160;static member CurrentManagedThreadId : int<br />&#160;&#160;static member Exit : exitCode:int -&gt; unit<br />&#160;&#160;static member ExitCode : int with get, set<br />&#160;&#160;static member ExpandEnvironmentVariables : name:string -&gt; string<br />&#160;&#160;static member FailFast : message:string -&gt; unit + 1 overload<br />&#160;&#160;static member GetCommandLineArgs : unit -&gt; string[]<br />&#160;&#160;static member GetEnvironmentVariable : variable:string -&gt; string + 1 overload<br />&#160;&#160;static member GetEnvironmentVariables : unit -&gt; IDictionary + 1 overload<br />&#160;&#160;...<br />&#160;&#160;nested type SpecialFolder<br />&#160;&#160;nested type SpecialFolderOption<br /><br />Full name: System.Environment</div>
<div class="tip" id="fs4">property Environment.CurrentDirectory: string</div>
<div class="tip" id="fs5">val parentDir : string<br /><br />Full name: Index.parentDir</div>
<div class="tip" id="fs6">val dir : IO.DirectoryInfo</div>
<div class="tip" id="fs7">namespace System.IO</div>
<div class="tip" id="fs8">Multiple items<br />type DirectoryInfo =<br />&#160;&#160;inherit FileSystemInfo<br />&#160;&#160;new : path:string -&gt; DirectoryInfo<br />&#160;&#160;member Create : unit -&gt; unit + 1 overload<br />&#160;&#160;member CreateSubdirectory : path:string -&gt; DirectoryInfo + 1 overload<br />&#160;&#160;member Delete : unit -&gt; unit + 1 overload<br />&#160;&#160;member EnumerateDirectories : unit -&gt; IEnumerable&lt;DirectoryInfo&gt; + 2 overloads<br />&#160;&#160;member EnumerateFileSystemInfos : unit -&gt; IEnumerable&lt;FileSystemInfo&gt; + 2 overloads<br />&#160;&#160;member EnumerateFiles : unit -&gt; IEnumerable&lt;FileInfo&gt; + 2 overloads<br />&#160;&#160;member Exists : bool<br />&#160;&#160;member GetAccessControl : unit -&gt; DirectorySecurity + 1 overload<br />&#160;&#160;member GetDirectories : unit -&gt; DirectoryInfo[] + 2 overloads<br />&#160;&#160;...<br /><br />Full name: System.IO.DirectoryInfo<br /><br />--------------------<br />IO.DirectoryInfo(path: string) : unit</div>
<div class="tip" id="fs9">property IO.DirectoryInfo.Parent: IO.DirectoryInfo</div>
<div class="tip" id="fs10">property IO.FileSystemInfo.FullName: string</div>
<div class="tip" id="fs11">val setCwd : dir:string -&gt; unit<br /><br />Full name: Index.setCwd</div>
<div class="tip" id="fs12">val dir : string</div>
<div class="tip" id="fs13">type Path =<br />&#160;&#160;static val InvalidPathChars : char[]<br />&#160;&#160;static val AltDirectorySeparatorChar : char<br />&#160;&#160;static val DirectorySeparatorChar : char<br />&#160;&#160;static val PathSeparator : char<br />&#160;&#160;static val VolumeSeparatorChar : char<br />&#160;&#160;static member ChangeExtension : path:string * extension:string -&gt; string<br />&#160;&#160;static member Combine : [&lt;ParamArray&gt;] paths:string[] -&gt; string + 3 overloads<br />&#160;&#160;static member GetDirectoryName : path:string -&gt; string<br />&#160;&#160;static member GetExtension : path:string -&gt; string<br />&#160;&#160;static member GetFileName : path:string -&gt; string<br />&#160;&#160;...<br /><br />Full name: System.IO.Path</div>
<div class="tip" id="fs14">IO.Path.Combine([&lt;ParamArray&gt;] paths: string []) : string<br />IO.Path.Combine(path1: string, path2: string) : string<br />IO.Path.Combine(path1: string, path2: string, path3: string) : string<br />IO.Path.Combine(path1: string, path2: string, path3: string, path4: string) : string</div>
<div class="tip" id="fs15">val ignore : value:&#39;T -&gt; unit<br /><br />Full name: Microsoft.FSharp.Core.Operators.ignore</div>
<div class="tip" id="fs16">val lock : lockObject:&#39;Lock -&gt; action:(unit -&gt; &#39;T) -&gt; &#39;T (requires reference type)<br /><br />Full name: Microsoft.FSharp.Core.Operators.lock</div>
<div class="tip" id="fs17">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;</div>
<div class="tip" id="fs18">val set : elements:seq&lt;&#39;T&gt; -&gt; Set&lt;&#39;T&gt; (requires comparison)<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.set</div>
<div class="tip" id="fs19">type unit = Unit<br /><br />Full name: Microsoft.FSharp.Core.unit</div>
<div class="tip" id="fs20">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = System.String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs21">Multiple items<br />type MyClass =<br />&#160;&#160;new : unit -&gt; MyClass<br />&#160;&#160;member Sum : x:int * y:int -&gt; int<br />&#160;&#160;member Name : string<br />&#160;&#160;member Name : string with set<br /><br />Full name: Index.MyClass<br /><br />--------------------<br />new : unit -&gt; MyClass</div>
<div class="tip" id="fs22">val this : MyClass</div>
<div class="tip" id="fs23">member MyClass.Sum : x:int * y:int -&gt; int<br /><br />Full name: Index.MyClass.Sum</div>
<div class="tip" id="fs24">val x : int</div>
<div class="tip" id="fs25">val y : int</div>
<div class="tip" id="fs26">val x : MyClass<br /><br />Full name: Index.x</div>
<div class="tip" id="fs27">val result : int<br /><br />Full name: Index.result</div>
<div class="tip" id="fs28">member MyClass.Sum : x:int * y:int -&gt; int</div>
<div class="tip" id="fs29">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printfn</div>
<div class="tip" id="fs30">property MyClass.Name: string</div>
<div class="tip" id="fs31">namespace System.Configuration</div>
<div class="tip" id="fs32">namespace System.Collections</div>
<div class="tip" id="fs33">namespace System.Collections.Specialized</div>
<div class="tip" id="fs34">Multiple items<br />type NameValueCollection =<br />&#160;&#160;inherit NameObjectCollectionBase<br />&#160;&#160;new : unit -&gt; NameValueCollection + 7 overloads<br />&#160;&#160;member Add : c:NameValueCollection -&gt; unit + 1 overload<br />&#160;&#160;member AllKeys : string[]<br />&#160;&#160;member Clear : unit -&gt; unit<br />&#160;&#160;member CopyTo : dest:Array * index:int -&gt; unit<br />&#160;&#160;member Get : name:string -&gt; string + 1 overload<br />&#160;&#160;member GetKey : index:int -&gt; string<br />&#160;&#160;member GetValues : name:string -&gt; string[] + 1 overload<br />&#160;&#160;member HasKeys : unit -&gt; bool<br />&#160;&#160;member Item : string -&gt; string with get, set<br />&#160;&#160;...<br /><br />Full name: System.Collections.Specialized.NameValueCollection<br /><br />--------------------<br />System.Collections.Specialized.NameValueCollection() : unit<br />System.Collections.Specialized.NameValueCollection(col: System.Collections.Specialized.NameValueCollection) : unit<br />System.Collections.Specialized.NameValueCollection(capacity: int) : unit<br />System.Collections.Specialized.NameValueCollection(equalityComparer: System.Collections.IEqualityComparer) : unit<br />System.Collections.Specialized.NameValueCollection(capacity: int, equalityComparer: System.Collections.IEqualityComparer) : unit<br />System.Collections.Specialized.NameValueCollection(capacity: int, col: System.Collections.Specialized.NameValueCollection) : unit</div>
<div class="tip" id="fs35">Multiple items<br />val seq : sequence:seq&lt;&#39;T&gt; -&gt; seq&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Core.Operators.seq<br /><br />--------------------<br />type seq&lt;&#39;T&gt; = System.Collections.Generic.IEnumerable&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.seq&lt;_&gt;</div>
<div class="tip" id="fs36">val not : value:bool -&gt; bool<br /><br />Full name: Microsoft.FSharp.Core.Operators.not</div>
<div class="tip" id="fs37">namespace Microsoft.FSharp</div>
<div class="tip" id="fs38">namespace Microsoft.FSharp.Data</div>
<div class="tip" id="fs39">type ConfigurationManager =<br />&#160;&#160;static member AppSettings : NameValueCollection<br />&#160;&#160;static member ConnectionStrings : ConnectionStringSettingsCollection<br />&#160;&#160;static member GetSection : sectionName:string -&gt; obj<br />&#160;&#160;static member OpenExeConfiguration : userLevel:ConfigurationUserLevel -&gt; Configuration + 1 overload<br />&#160;&#160;static member OpenMachineConfiguration : unit -&gt; Configuration<br />&#160;&#160;static member OpenMappedExeConfiguration : fileMap:ExeConfigurationFileMap * userLevel:ConfigurationUserLevel -&gt; Configuration<br />&#160;&#160;static member OpenMappedMachineConfiguration : fileMap:ConfigurationFileMap -&gt; Configuration<br />&#160;&#160;static member RefreshSection : sectionName:string -&gt; unit<br /><br />Full name: System.Configuration.ConfigurationManager</div>
<div class="tip" id="fs40">property ConfigurationManager.AppSettings: Collections.Specialized.NameValueCollection</div>
<div class="tip" id="fs41">val appSettingsTest2 : string<br /><br />Full name: Index.appSettingsTest2</div>
<div class="tip" id="fs42">Multiple items<br />namespace FSharp<br /><br />--------------------<br />namespace Microsoft.FSharp</div>
<div class="tip" id="fs43">namespace FSharp.Configuration</div>
<div class="tip" id="fs44">type Settings1 = AppSettings&lt;...&gt;<br /><br />Full name: Index.Settings1</div>
<div class="tip" id="fs45">type AppSettings<br /><br />Full name: FSharp.Configuration.AppSettings</div>
<div class="tip" id="fs46">property AppSettings&lt;...&gt;.Test2: string<br /><em><br /><br />Returns the value from App.config with key test2</em></div>
<div class="tip" id="fs47">AppSettings&lt;...&gt;.SelectExecutableFile(pathOfExe: string) : Unit<br /><em><br /><br />Property to change the executable file that is read for configurations. This idea is that you can manage other executables also (e.g. from script).</em></div>
<div class="tip" id="fs48">type Settings2 = AppSettings&lt;...&gt;<br /><br />Full name: Index.Settings2</div>
<div class="tip" id="fs49">Multiple items<br />type LiteralAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; LiteralAttribute<br /><br />Full name: Microsoft.FSharp.Core.LiteralAttribute<br /><br />--------------------<br />new : unit -&gt; LiteralAttribute</div>
<div class="tip" id="fs50">val AppSettingsConfig : string<br /><br />Full name: Index.AppSettingsConfig</div>
<div class="tip" id="fs51">type Settings = AppSettings&lt;...&gt;<br /><br />Full name: Index.Settings</div>
<div class="tip" id="fs52">val AppSettingsExe : string<br /><br />Full name: Index.AppSettingsExe</div>
<div class="tip" id="fs53">val Config : string<br /><br />Full name: Index.Config</div>
<div class="tip" id="fs54">type ScriptSettings = AppSettings&lt;...&gt;<br /><br />Full name: Index.ScriptSettings</div>
<div class="tip" id="fs55">val Exec : string<br /><br />Full name: Index.Exec</div>
<div class="tip" id="fs56">val appKey1 : Guid<br /><br />Full name: Index.appKey1</div>
<div class="tip" id="fs57">property AppSettings&lt;...&gt;.AppKey: Guid<br /><em><br /><br />Returns the value from /Users/admin/Code/scripting-workshop/slides/index.fsx.config with key AppKey</em></div>
<div class="tip" id="fs58">namespace System.Xml</div>
<div class="tip" id="fs59">namespace System.Xml.Linq</div>
<div class="tip" id="fs60">val AppSettingsPath : string<br /><br />Full name: Index.AppSettingsPath</div>
<div class="tip" id="fs61">Multiple items<br />type ConfigurationManager =<br />&#160;&#160;new : unit -&gt; ConfigurationManager<br />&#160;&#160;static member AppSettings : IDictionary&lt;string,string&gt;<br />&#160;&#160;static member ConnectionStrings : IDictionary&lt;string,string&gt;<br /><br />Full name: Index.ConfigurationManager<br /><br />--------------------<br />new : unit -&gt; ConfigurationManager</div>
<div class="tip" id="fs62">val config : XDocument</div>
<div class="tip" id="fs63">Multiple items<br />type XDocument =<br />&#160;&#160;inherit XContainer<br />&#160;&#160;new : unit -&gt; XDocument + 3 overloads<br />&#160;&#160;member Declaration : XDeclaration with get, set<br />&#160;&#160;member DocumentType : XDocumentType<br />&#160;&#160;member NodeType : XmlNodeType<br />&#160;&#160;member Root : XElement<br />&#160;&#160;member Save : fileName:string -&gt; unit + 6 overloads<br />&#160;&#160;member WriteTo : writer:XmlWriter -&gt; unit<br />&#160;&#160;static member Load : uri:string -&gt; XDocument + 7 overloads<br />&#160;&#160;static member Parse : text:string -&gt; XDocument + 1 overload<br /><br />Full name: System.Xml.Linq.XDocument<br /><br />--------------------<br />XDocument() : unit<br />XDocument([&lt;ParamArray&gt;] content: obj []) : unit<br />XDocument(other: XDocument) : unit<br />XDocument(declaration: XDeclaration, [&lt;ParamArray&gt;] content: obj []) : unit</div>
<div class="tip" id="fs64">XDocument.Load(reader: XmlReader) : XDocument<br />XDocument.Load(textReader: IO.TextReader) : XDocument<br />XDocument.Load(stream: IO.Stream) : XDocument<br />XDocument.Load(uri: string) : XDocument<br />XDocument.Load(reader: XmlReader, options: LoadOptions) : XDocument<br />XDocument.Load(textReader: IO.TextReader, options: LoadOptions) : XDocument<br />XDocument.Load(stream: IO.Stream, options: LoadOptions) : XDocument<br />XDocument.Load(uri: string, options: LoadOptions) : XDocument</div>
<div class="tip" id="fs65">val section : (XDocument -&gt; string -&gt; string -&gt; string -&gt; Collections.Generic.IDictionary&lt;string,string&gt;)</div>
<div class="tip" id="fs66">val name : string</div>
<div class="tip" id="fs67">val key : string</div>
<div class="tip" id="fs68">val value : string</div>
<div class="tip" id="fs69">val query : Linq.QueryBuilder<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.query</div>
<div class="tip" id="fs70">val els : XElement</div>
<div class="tip" id="fs71">XContainer.Descendants() : Collections.Generic.IEnumerable&lt;XElement&gt;<br />XContainer.Descendants(name: XName) : Collections.Generic.IEnumerable&lt;XElement&gt;</div>
<div class="tip" id="fs72">type XName =<br />&#160;&#160;member Equals : obj:obj -&gt; bool<br />&#160;&#160;member GetHashCode : unit -&gt; int<br />&#160;&#160;member LocalName : string<br />&#160;&#160;member Namespace : XNamespace<br />&#160;&#160;member NamespaceName : string<br />&#160;&#160;member ToString : unit -&gt; string<br />&#160;&#160;static member Get : expandedName:string -&gt; XName + 1 overload<br /><br />Full name: System.Xml.Linq.XName</div>
<div class="tip" id="fs73">XName.Get(expandedName: string) : XName<br />XName.Get(localName: string, namespaceName: string) : XName</div>
<div class="tip" id="fs74">val el : XElement</div>
<div class="tip" id="fs75">val k : string</div>
<div class="tip" id="fs76">XElement.Attribute(name: XName) : XAttribute</div>
<div class="tip" id="fs77">val v : string</div>
<div class="tip" id="fs78">custom operation: select (&#39;Result)<br /><br />Calls Linq.QueryBuilder.Select </div>
<div class="tip" id="fs79">val dict : keyValuePairs:seq&lt;&#39;Key * &#39;Value&gt; -&gt; Collections.Generic.IDictionary&lt;&#39;Key,&#39;Value&gt; (requires equality)<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.dict</div>
<div class="tip" id="fs80">val appSettings : Collections.Generic.IDictionary&lt;string,string&gt;</div>
<div class="tip" id="fs81">val connectionStrings : Collections.Generic.IDictionary&lt;string,string&gt;</div>
<div class="tip" id="fs82">Multiple items<br />static member ConfigurationManager.AppSettings : Collections.Generic.IDictionary&lt;string,string&gt;<br /><br />Full name: Index.ConfigurationManager.AppSettings<br /><br />--------------------<br />type AppSettings<br /><br />Full name: FSharp.Configuration.AppSettings</div>
<div class="tip" id="fs83">static member ConfigurationManager.ConnectionStrings : Collections.Generic.IDictionary&lt;string,string&gt;<br /><br />Full name: Index.ConfigurationManager.ConnectionStrings</div>
<div class="tip" id="fs84">type Configuration =<br />&#160;&#160;member AppSettings : AppSettingsSection<br />&#160;&#160;member ConnectionStrings : ConnectionStringsSection<br />&#160;&#160;member EvaluationContext : ContextInformation<br />&#160;&#160;member FilePath : string<br />&#160;&#160;member GetSection : path:string -&gt; ConfigurationSection<br />&#160;&#160;member GetSectionGroup : path:string -&gt; ConfigurationSectionGroup<br />&#160;&#160;member HasFile : bool<br />&#160;&#160;member Locations : ConfigurationLocationCollection<br />&#160;&#160;member NamespaceDeclared : bool with get, set<br />&#160;&#160;member RootSectionGroup : ConfigurationSectionGroup<br />&#160;&#160;...<br /><br />Full name: System.Configuration.Configuration</div>
<div class="tip" id="fs85">Multiple items<br />property ConfigurationManager.AppSettings: Collections.Specialized.NameValueCollection<br /><br />--------------------<br />property ConfigurationManager.AppSettings: Collections.Generic.IDictionary&lt;string,string&gt;</div>
<div class="tip" id="fs86">val appKey : string<br /><br />Full name: Index.appKey</div>
<div class="tip" id="fs87">Multiple items<br />property ConfigurationManager.ConnectionStrings: ConnectionStringSettingsCollection<br /><br />--------------------<br />property ConfigurationManager.ConnectionStrings: Collections.Generic.IDictionary&lt;string,string&gt;</div>
<div class="tip" id="fs88">val test1 : ConnectionStringSettings<br /><br />Full name: Index.test1</div>
<div class="tip" id="fs89">Multiple items<br />namespace FSharp.Data<br /><br />--------------------<br />namespace Microsoft.FSharp.Data</div>
<div class="tip" id="fs90">val ( geocoding.json ) : string<br /><br />Full name: Index.( geocoding.json )</div>
<div class="tip" id="fs91">type Location = obj<br /><br />Full name: Index.Location</div>
<div class="tip" id="fs92">type JsonProvider<br /><br />Full name: FSharp.Data.JsonProvider<br /><em><br /><br />&lt;summary&gt;Typed representation of a JSON document.&lt;/summary&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Sample&#39;&gt;Location of a JSON sample file or a string containing a sample JSON document.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;SampleIsList&#39;&gt;If true, sample should be a list of individual samples for the inference.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;RootName&#39;&gt;The name to be used to the root type. Defaults to `Root`.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Culture&#39;&gt;The culture used for parsing numbers and dates. Defaults to the invariant culture.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Encoding&#39;&gt;The encoding used to read the sample. You can specify either the character set name or the codepage number. Defaults to UTF8 for files, and to ISO-8859-1 the for HTTP requests, unless `charset` is specified in the `Content-Type` response header.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;ResolutionFolder&#39;&gt;A directory that is used when resolving relative file references (at design time and in hosted execution).&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;EmbeddedResource&#39;&gt;When specified, the type provider first attempts to load the sample from the specified resource <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(e.g. &#39;MyCompany.MyAssembly, resource_name.json&#39;). This is useful when exposing types generated by the type provider.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;InferTypesFromValues&#39;&gt;If true, turns on additional type inference from values. <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(e.g. type inference infers string values such as &quot;123&quot; as ints and values constrained to 0 and 1 as booleans.)&lt;/param&gt;</em></div>
<div class="tip" id="fs93">val extract : city:string -&gt; &#39;a<br /><br />Full name: Index.extract</div>
<div class="tip" id="fs94">val city : string</div>
<div class="tip" id="fs95">val uri : string</div>
<div class="tip" id="fs96">val result : obj<br /><br />Full name: Index.result</div>
<div class="tip" id="fs97">type LocationResult =<br />&#160;&#160;{DisplayName: string;<br />&#160;&#160;&#160;Latitude: float;<br />&#160;&#160;&#160;Longitude: float;<br />&#160;&#160;&#160;City: string;<br />&#160;&#160;&#160;State: string;<br />&#160;&#160;&#160;Country: string;<br />&#160;&#160;&#160;CountryCode: string;<br />&#160;&#160;&#160;EnergyUse: Indicator option;}<br /><br />Full name: Index.LocationResult</div>
<div class="tip" id="fs98">LocationResult.DisplayName: string</div>
<div class="tip" id="fs99">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs100">LocationResult.Latitude: float</div>
<div class="tip" id="fs101">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.float<br /><br />--------------------<br />type float = Double<br /><br />Full name: Microsoft.FSharp.Core.float<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float<br /><br />Full name: Microsoft.FSharp.Core.float&lt;_&gt;</div>
<div class="tip" id="fs102">LocationResult.Longitude: float</div>
<div class="tip" id="fs103">LocationResult.City: string</div>
<div class="tip" id="fs104">LocationResult.State: string</div>
<div class="tip" id="fs105">LocationResult.Country: string</div>
<div class="tip" id="fs106">LocationResult.CountryCode: string</div>
<div class="tip" id="fs107">LocationResult.EnergyUse: Runtime.WorldBank.Indicator option</div>
<div class="tip" id="fs108">Multiple items<br />namespace FSharp.Data.Runtime<br /><br />--------------------<br />namespace System.Runtime</div>
<div class="tip" id="fs109">namespace FSharp.Data.Runtime.WorldBank</div>
<div class="tip" id="fs110">type Indicator =<br />&#160;&#160;interface IEnumerable<br />&#160;&#160;interface seq&lt;int * float&gt;<br />&#160;&#160;private new : connection:ServiceConnection * countryOrRegionCode:string * indicatorCode:string -&gt; Indicator<br />&#160;&#160;member TryGetValueAt : year:int -&gt; float option<br />&#160;&#160;member Code : string<br />&#160;&#160;member Description : string<br />&#160;&#160;member IndicatorCode : string<br />&#160;&#160;member Item : year:int -&gt; float with get<br />&#160;&#160;member Name : string<br />&#160;&#160;member Source : string<br />&#160;&#160;...<br /><br />Full name: FSharp.Data.Runtime.WorldBank.Indicator</div>
<div class="tip" id="fs111">type &#39;T option = Option&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Core.option&lt;_&gt;</div>
<div class="tip" id="fs112">val transformSimple : source:&#39;a -&gt; LocationResult list<br /><br />Full name: Index.transformSimple</div>
<div class="tip" id="fs113">val source : &#39;a</div>
<div class="tip" id="fs114">type &#39;T list = List&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.list&lt;_&gt;</div>
<div class="tip" id="fs115">val result : obj</div>
<div class="tip" id="fs116">union case Option.None: Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs117">val extractEnergyUse : result:&#39;a -&gt; wb:WorldBankData.ServiceTypes.WorldBankDataService -&gt; Runtime.WorldBank.Indicator option<br /><br />Full name: Index.extractEnergyUse</div>
<div class="tip" id="fs118">val result : &#39;a</div>
<div class="tip" id="fs119">Multiple items<br />module Result<br /><br />from Microsoft.FSharp.Core<br /><br />--------------------<br />type Result&lt;&#39;T,&#39;TError&gt; =<br />&#160;&#160;| Ok of ResultValue: &#39;T<br />&#160;&#160;| Error of ErrorValue: &#39;TError<br /><br />Full name: Microsoft.FSharp.Core.Result&lt;_,_&gt;</div>
<div class="tip" id="fs120">val wb : WorldBankData.ServiceTypes.WorldBankDataService</div>
<div class="tip" id="fs121">type WorldBankData =<br />&#160;&#160;static member GetDataContext : unit -&gt; WorldBankDataService<br />&#160;&#160;nested type ServiceTypes<br /><br />Full name: FSharp.Data.WorldBankData<br /><em><br /><br />&lt;summary&gt;Typed representation of WorldBank data. See http://www.worldbank.org for terms and conditions.&lt;/summary&gt;</em></div>
<div class="tip" id="fs122">type ServiceTypes =<br />&#160;&#160;nested type Countries<br />&#160;&#160;nested type Country<br />&#160;&#160;nested type Indicators<br />&#160;&#160;nested type IndicatorsDescriptions<br />&#160;&#160;nested type Region<br />&#160;&#160;nested type Regions<br />&#160;&#160;nested type Topic<br />&#160;&#160;nested type Topics<br />&#160;&#160;nested type WorldBankDataService<br /><br />Full name: FSharp.Data.WorldBankData.ServiceTypes<br /><em><br /><br />&lt;summary&gt;Contains the types that describe the data service&lt;/summary&gt;</em></div>
<div class="tip" id="fs123">type WorldBankDataService =<br />&#160;&#160;inherit WorldBankData<br />&#160;&#160;member Countries : Countries<br />&#160;&#160;member Regions : Regions<br />&#160;&#160;member Topics : Topics<br /><br />Full name: FSharp.Data.WorldBankData.ServiceTypes.WorldBankDataService</div>
<div class="tip" id="fs124">property WorldBankData.ServiceTypes.WorldBankDataService.Countries: WorldBankData.ServiceTypes.Countries</div>
<div class="tip" id="fs125">module Seq<br /><br />from Microsoft.FSharp.Collections</div>
<div class="tip" id="fs126">val tryFind : predicate:(&#39;T -&gt; bool) -&gt; source:seq&lt;&#39;T&gt; -&gt; &#39;T option<br /><br />Full name: Microsoft.FSharp.Collections.Seq.tryFind</div>
<div class="tip" id="fs127">val x : WorldBankData.ServiceTypes.Country</div>
<div class="tip" id="fs128">property Runtime.WorldBank.Country.Name: string</div>
<div class="tip" id="fs129">module Option<br /><br />from Microsoft.FSharp.Core</div>
<div class="tip" id="fs130">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; option:&#39;T option -&gt; &#39;U option<br /><br />Full name: Microsoft.FSharp.Core.Option.map</div>
<div class="tip" id="fs131">property WorldBankData.ServiceTypes.Country.Indicators: WorldBankData.ServiceTypes.Indicators<br /><em><br /><br />&lt;summary&gt;The indicators for the country&lt;/summary&gt;</em></div>
<div class="tip" id="fs132">val transform : source:&#39;a -&gt; LocationResult list<br /><br />Full name: Index.transform</div>
<div class="tip" id="fs133">WorldBankData.GetDataContext() : WorldBankData.ServiceTypes.WorldBankDataService</div>
<div class="tip" id="fs134">val energyUse : Runtime.WorldBank.Indicator option</div>
<div class="tip" id="fs135">type LocationSink = CsvProvider&lt;...&gt;<br /><br />Full name: Index.LocationSink</div>
<div class="tip" id="fs136">type CsvProvider<br /><br />Full name: FSharp.Data.CsvProvider<br /><em><br /><br />&lt;summary&gt;Typed representation of a CSV file.&lt;/summary&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Sample&#39;&gt;Location of a CSV sample file or a string containing a sample CSV document.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Separators&#39;&gt;Column delimiter(s). Defaults to `,`.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;InferRows&#39;&gt;Number of rows to use for inference. Defaults to `1000`. If this is zero, all rows are used.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Schema&#39;&gt;Optional column types, in a comma separated list. Valid types are `int`, `int64`, `bool`, `float`, `decimal`, `date`, `guid`, `string`, `int?`, `int64?`, `bool?`, `float?`, `decimal?`, `date?`, `guid?`, `int option`, `int64 option`, `bool option`, `float option`, `decimal option`, `date option`, `guid option` and `string option`.<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;You can also specify a unit and the name of the column like this: `Name (type&amp;lt;unit&amp;gt;)`, or you can override only the name. If you don&#39;t want to specify all the columns, you can reference the columns by name like this: `ColumnName=type`.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;HasHeaders&#39;&gt;Whether the sample contains the names of the columns as its first line.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;IgnoreErrors&#39;&gt;Whether to ignore rows that have the wrong number of columns or which can&#39;t be parsed using the inferred or specified schema. Otherwise an exception is thrown when these rows are encountered.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;SkipRows&#39;&gt;Skips the first n rows of the CSV file.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;AssumeMissingValues&#39;&gt;When set to true, the type provider will assume all columns can have missing values, even if in the provided sample all values are present. Defaults to false.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;PreferOptionals&#39;&gt;When set to true, inference will prefer to use the option type instead of nullable types, `double.NaN` or `&quot;&quot;` for missing values. Defaults to false.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Quote&#39;&gt;The quotation mark (for surrounding values containing the delimiter). Defaults to `&quot;`.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;MissingValues&#39;&gt;The set of strings recogized as missing values. Defaults to `NaN,NA,N/A,#N/A,:,-,TBA,TBD`.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;CacheRows&#39;&gt;Whether the rows should be caches so they can be iterated multiple times. Defaults to true. Disable for large datasets.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Culture&#39;&gt;The culture used for parsing numbers and dates. Defaults to the invariant culture.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;Encoding&#39;&gt;The encoding used to read the sample. You can specify either the character set name or the codepage number. Defaults to UTF8 for files, and to ISO-8859-1 the for HTTP requests, unless `charset` is specified in the `Content-Type` response header.&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;ResolutionFolder&#39;&gt;A directory that is used when resolving relative file references (at design time and in hosted execution).&lt;/param&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;param name=&#39;EmbeddedResource&#39;&gt;When specified, the type provider first attempts to load the sample from the specified resource <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(e.g. &#39;MyCompany.MyAssembly, resource_name.csv&#39;). This is useful when exposing types generated by the type provider.&lt;/param&gt;</em></div>
<div class="tip" id="fs137">type EnergyUseSink = CsvProvider&lt;...&gt;<br /><br />Full name: Index.EnergyUseSink</div>
<div class="tip" id="fs138">val load : data:LocationResult list -&gt; unit<br /><br />Full name: Index.load</div>
<div class="tip" id="fs139">val data : LocationResult list</div>
<div class="tip" id="fs140">val locations : CsvProvider&lt;...&gt;.Row list</div>
<div class="tip" id="fs141">val energyUse : LocationResult list list</div>
<div class="tip" id="fs142">val row : LocationResult</div>
<div class="tip" id="fs143">val location : CsvProvider&lt;...&gt;.Row</div>
<div class="tip" id="fs144">type Row =<br />&#160;&#160;inherit string * float * float * string * string * string * string<br />&#160;&#160;new : location: string * latitude: float * longitude: float * city: string * state: string * country: string * countryCode: string -&gt; Row<br />&#160;&#160;member City : string<br />&#160;&#160;member Country : string<br />&#160;&#160;member CountryCode : string<br />&#160;&#160;member Latitude : float<br />&#160;&#160;member Location : string<br />&#160;&#160;member Longitude : float<br />&#160;&#160;member State : string<br /><br />Full name: FSharp.Data.CsvProvider,Sample=&quot;Location (string),Latitude (float),Longitude (float),City (string),State (string),Country (string),CountryCode (string)&quot;.Row</div>
<div class="tip" id="fs145">val usage : LocationResult list</div>
<div class="tip" id="fs146">union case Option.Some: Value: &#39;T -&gt; Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs147">val i : Runtime.WorldBank.Indicator</div>
<div class="tip" id="fs148">type Row =<br />&#160;&#160;inherit string * int * float<br />&#160;&#160;new : countryCode: string * year: int * energyUse: float -&gt; Row<br />&#160;&#160;member CountryCode : string<br />&#160;&#160;member EnergyUse : float<br />&#160;&#160;member Year : int<br /><br />Full name: FSharp.Data.CsvProvider,Sample=&quot;CountryCode (string),Year (int),EnergyUse (float)&quot;.Row</div>
<div class="tip" id="fs149">Multiple items<br />module List<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------<br />type List&lt;&#39;T&gt; =<br />&#160;&#160;| ( [] )<br />&#160;&#160;| ( :: ) of Head: &#39;T * Tail: &#39;T list<br />&#160;&#160;interface IReadOnlyCollection&lt;&#39;T&gt;<br />&#160;&#160;interface IEnumerable<br />&#160;&#160;interface IEnumerable&lt;&#39;T&gt;<br />&#160;&#160;member GetSlice : startIndex:int option * endIndex:int option -&gt; &#39;T list<br />&#160;&#160;member Head : &#39;T<br />&#160;&#160;member IsEmpty : bool<br />&#160;&#160;member Item : index:int -&gt; &#39;T with get<br />&#160;&#160;member Length : int<br />&#160;&#160;member Tail : &#39;T list<br />&#160;&#160;static member Cons : head:&#39;T * tail:&#39;T list -&gt; &#39;T list<br />&#160;&#160;static member Empty : &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List&lt;_&gt;</div>
<div class="tip" id="fs150">val unzip : list:(&#39;T1 * &#39;T2) list -&gt; &#39;T1 list * &#39;T2 list<br /><br />Full name: Microsoft.FSharp.Collections.List.unzip</div>
<div class="tip" id="fs151">val locationSink : LocationSink</div>
<div class="tip" id="fs152">member Runtime.CsvFile.Save : path:string * ?separator:char * ?quote:char -&gt; unit<br />member Runtime.CsvFile.Save : stream:IO.Stream * ?separator:char * ?quote:char -&gt; unit<br />member Runtime.CsvFile.Save : writer:IO.TextWriter * ?separator:char * ?quote:char -&gt; unit</div>
<div class="tip" id="fs153">val distinct : LocationResult list</div>
<div class="tip" id="fs154">val concat : lists:seq&lt;&#39;T list&gt; -&gt; &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List.concat</div>
<div class="tip" id="fs155">val distinctBy : projection:(&#39;T -&gt; &#39;Key) -&gt; list:&#39;T list -&gt; &#39;T list (requires equality)<br /><br />Full name: Microsoft.FSharp.Collections.List.distinctBy</div>
<div class="tip" id="fs156">val x : LocationResult</div>
<div class="tip" id="fs157">val energyUseSink : EnergyUseSink</div>
<div class="tip" id="fs158">val run : city:string -&gt; unit<br /><br />Full name: Index.run</div>
<div class="tip" id="fs159">namespace Expecto</div>
<div class="tip" id="fs160">val addTest : Test<br /><br />Full name: Index.addTest</div>
<div class="tip" id="fs161">val testCase : name:string -&gt; test:(unit -&gt; unit) -&gt; Test<br /><br />Full name: Expecto.Tests.testCase</div>
<div class="tip" id="fs162">val expected : int</div>
<div class="tip" id="fs163">module Expect<br /><br />from Expecto</div>
<div class="tip" id="fs164">val equal : actual:&#39;a -&gt; expected:&#39;a -&gt; message:string -&gt; unit (requires equality)<br /><br />Full name: Expecto.Expect.equal</div>
<div class="tip" id="fs165">Multiple items<br />module Tests<br /><br />from Expecto<br /><br />--------------------<br />type TestsAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; TestsAttribute<br /><br />Full name: Expecto.TestsAttribute<br /><br />--------------------<br />new : unit -&gt; TestsAttribute</div>
<div class="tip" id="fs166">val runTests : config:Impl.ExpectoConfig -&gt; tests:Test -&gt; int<br /><br />Full name: Expecto.Tests.runTests</div>
<div class="tip" id="fs167">val defaultConfig : Impl.ExpectoConfig<br /><br />Full name: Expecto.Tests.defaultConfig</div>
<div class="tip" id="fs168">val failTest : Test<br /><br />Full name: Index.failTest</div>
<div class="tip" id="fs169">val multTest : Test<br /><br />Full name: Index.multTest</div>
<div class="tip" id="fs170">val intTests : Test<br /><br />Full name: Index.intTests</div>
<div class="tip" id="fs171">val testList : name:string -&gt; tests:Test list -&gt; Test<br /><br />Full name: Expecto.Tests.testList</div>
<div class="tip" id="fs172">val config : FsCheckConfig<br /><br />Full name: Index.config</div>
<div class="tip" id="fs173">type FsCheckConfig =<br />&#160;&#160;{maxTest: int;<br />&#160;&#160;&#160;startSize: int;<br />&#160;&#160;&#160;endSize: int;<br />&#160;&#160;&#160;replay: (int * int) option;<br />&#160;&#160;&#160;arbitrary: Type list;<br />&#160;&#160;&#160;receivedArgs: FsCheckConfig -&gt; string -&gt; int -&gt; obj list -&gt; Async&lt;unit&gt;;<br />&#160;&#160;&#160;successfulShrink: FsCheckConfig -&gt; string -&gt; obj list -&gt; Async&lt;unit&gt;;<br />&#160;&#160;&#160;finishedTest: FsCheckConfig -&gt; string -&gt; Async&lt;unit&gt;;}<br />&#160;&#160;static member defaultConfig : FsCheckConfig<br /><br />Full name: Expecto.FsCheckConfig</div>
<div class="tip" id="fs174">property FsCheckConfig.defaultConfig: FsCheckConfig</div>
<div class="tip" id="fs175">val properties : Test<br /><br />Full name: Index.properties</div>
<div class="tip" id="fs176">val testProperty : name:string -&gt; (&#39;a -&gt; Test)<br /><br />Full name: Expecto.ExpectoFsCheck.testProperty</div>
<div class="tip" id="fs177">val a : int</div>
<div class="tip" id="fs178">val b : int</div>
<div class="tip" id="fs179">val xs : int list</div>
<div class="tip" id="fs180">val rev : list:&#39;T list -&gt; &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List.rev</div>
<div class="tip" id="fs181">val testPropertyWithConfig : config:FsCheckConfig -&gt; name:string -&gt; (&#39;a -&gt; Test)<br /><br />Full name: Expecto.ExpectoFsCheck.testPropertyWithConfig</div>
<div class="tip" id="fs182">val c : int</div>
<div class="tip" id="fs183">val allTests : Test<br /><br />Full name: Index.allTests</div>
<div class="tip" id="fs184">namespace XPlot</div>
<div class="tip" id="fs185">namespace XPlot.GoogleCharts</div>
<div class="tip" id="fs186">val showMap : data:LocationResult list -&gt; unit<br /><br />Full name: Index.showMap</div>
<div class="tip" id="fs187">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; list:&#39;T list -&gt; &#39;U list<br /><br />Full name: Microsoft.FSharp.Collections.List.map</div>
<div class="tip" id="fs188">type Chart =<br />&#160;&#160;static member Annotation : data:seq&lt;#seq&lt;DateTime * &#39;V * string * string&gt;&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart (requires &#39;V :&gt; value)<br />&#160;&#160;static member Annotation : data:seq&lt;DateTime * #value * string * string&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />&#160;&#160;static member Area : data:seq&lt;#seq&lt;&#39;K * &#39;V&gt;&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart (requires &#39;K :&gt; key and &#39;V :&gt; value)<br />&#160;&#160;static member Area : data:seq&lt;#key * #value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />&#160;&#160;static member Area : data:seq&lt;#value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />&#160;&#160;static member Bar : data:seq&lt;#seq&lt;&#39;K * &#39;V&gt;&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart (requires &#39;K :&gt; key and &#39;V :&gt; value)<br />&#160;&#160;static member Bar : data:seq&lt;#key * #value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />&#160;&#160;static member Bar : data:seq&lt;#value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />&#160;&#160;static member Bubble : data:seq&lt;string * #value * #value * #value * #value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />&#160;&#160;static member Bubble : data:seq&lt;string * #value * #value * #value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />&#160;&#160;...<br /><br />Full name: XPlot.GoogleCharts.Chart</div>
<div class="tip" id="fs189">static member Chart.Map : data:seq&lt;float * float * string&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />static member Chart.Map : data:seq&lt;string * string&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart</div>
<div class="tip" id="fs190">static member Chart.WithOptions : options:Options -&gt; chart:GoogleChart -&gt; GoogleChart</div>
<div class="tip" id="fs191">Multiple items<br />type Options =<br />&#160;&#160;new : unit -&gt; Options<br />&#160;&#160;member ShouldSerializeaggregationTarget : unit -&gt; bool<br />&#160;&#160;member ShouldSerializeallValuesSuffix : unit -&gt; bool<br />&#160;&#160;member ShouldSerializeallowHtml : unit -&gt; bool<br />&#160;&#160;member ShouldSerializealternatingRowStyle : unit -&gt; bool<br />&#160;&#160;member ShouldSerializeanimation : unit -&gt; bool<br />&#160;&#160;member ShouldSerializeannotations : unit -&gt; bool<br />&#160;&#160;member ShouldSerializeannotationsWidth : unit -&gt; bool<br />&#160;&#160;member ShouldSerializeareaOpacity : unit -&gt; bool<br />&#160;&#160;member ShouldSerializeavoidOverlappingGridLines : unit -&gt; bool<br />&#160;&#160;...<br /><br />Full name: XPlot.GoogleCharts.Configuration.Options<br /><br />--------------------<br />new : unit -&gt; Options</div>
<div class="tip" id="fs192">static member Chart.WithHeight : height:int -&gt; chart:GoogleChart -&gt; GoogleChart</div>
<div class="tip" id="fs193">static member Chart.Show : chart:GoogleChart -&gt; unit</div>
<div class="tip" id="fs194">val showEnergyUse : data:LocationResult list -&gt; unit<br /><br />Full name: Index.showEnergyUse</div>
<div class="tip" id="fs195">val labels : string list</div>
<div class="tip" id="fs196">val plots : (string * float) list list</div>
<div class="tip" id="fs197">val choose : chooser:(&#39;T -&gt; &#39;U option) -&gt; list:&#39;T list -&gt; &#39;U list<br /><br />Full name: Microsoft.FSharp.Collections.List.choose</div>
<div class="tip" id="fs198">val energyUse : Runtime.WorldBank.Indicator</div>
<div class="tip" id="fs199">val fst : tuple:(&#39;T1 * &#39;T2) -&gt; &#39;T1<br /><br />Full name: Microsoft.FSharp.Core.Operators.fst</div>
<div class="tip" id="fs200">val country : string</div>
<div class="tip" id="fs201">static member Chart.Line : data:seq&lt;#seq&lt;&#39;K * &#39;V&gt;&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart (requires &#39;K :&gt; key and &#39;V :&gt; value)<br />static member Chart.Line : data:seq&lt;#key * #value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart<br />static member Chart.Line : data:seq&lt;#value&gt; * ?Labels:seq&lt;string&gt; * ?Options:Options -&gt; GoogleChart</div>
<div class="tip" id="fs202">static member Chart.WithLabels : labels:seq&lt;string&gt; -&gt; chart:GoogleChart -&gt; GoogleChart</div>
<div class="tip" id="fs203">val fsi : Compiler.Interactive.InteractiveSession<br /><br />Full name: Microsoft.FSharp.Compiler.Interactive.Settings.fsi</div>
<div class="tip" id="fs204">member Compiler.Interactive.InteractiveSession.AddPrinter : (&#39;T -&gt; string) -&gt; unit</div>
<div class="tip" id="fs205">val chart : GoogleChart</div>
<div class="tip" id="fs206">Multiple items<br />type GoogleChart =<br />&#160;&#160;new : unit -&gt; GoogleChart<br />&#160;&#160;val mutable private dataTable: DataTable<br />&#160;&#160;val mutable private options: Options<br />&#160;&#160;val mutable private type: ChartGallery<br />&#160;&#160;member GetHtml : unit -&gt; string<br />&#160;&#160;member GetInlineHtml : unit -&gt; string<br />&#160;&#160;member GetInlineJS : unit -&gt; string<br />&#160;&#160;member Show : unit -&gt; unit<br />&#160;&#160;member WithHeight : height:int -&gt; unit<br />&#160;&#160;member WithId : newId:string -&gt; unit<br />&#160;&#160;...<br /><br />Full name: XPlot.GoogleCharts.GoogleChart<br /><br />--------------------<br />new : unit -&gt; GoogleChart</div>
<div class="tip" id="fs207">namespace Argu</div>
<div class="tip" id="fs208">type Arguments =<br />&#160;&#160;| City of string<br />&#160;&#160;interface IArgParserTemplate<br /><br />Full name: Index.Arguments</div>
<div class="tip" id="fs209">Multiple items<br />type MandatoryAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; MandatoryAttribute<br /><br />Full name: Argu.ArguAttributes.MandatoryAttribute<br /><br />--------------------<br />new : unit -&gt; MandatoryAttribute</div>
<div class="tip" id="fs210">union case Arguments.City: string -&gt; Arguments</div>
<div class="tip" id="fs211">type IArgParserTemplate =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member Usage : string<br />&#160;&#160;end<br /><br />Full name: Argu.IArgParserTemplate</div>
<div class="tip" id="fs212">val this : Arguments</div>
<div class="tip" id="fs213">override Arguments.Usage : string<br /><br />Full name: Index.Arguments.Usage</div>
<div class="tip" id="fs214">val runCLI : args:string [] -&gt; unit<br /><br />Full name: Index.runCLI</div>
<div class="tip" id="fs215">val args : string []</div>
<div class="tip" id="fs216">val argParser : ArgumentParser&lt;Arguments&gt;</div>
<div class="tip" id="fs217">Multiple items<br />type ArgumentParser =<br />&#160;&#160;private new : argInfo:UnionArgInfo * _programName:string * helpTextMessage:string option * _usageStringCharacterWidth:int * errorHandler:IExiter -&gt; ArgumentParser<br />&#160;&#160;abstract member Accept : visitor:IArgumentParserVisitor&lt;&#39;R&gt; -&gt; &#39;R<br />&#160;&#160;member GetArgumentCases : unit -&gt; ArgumentCaseInfo list<br />&#160;&#160;member GetSubCommandParsers : unit -&gt; ArgumentParser list<br />&#160;&#160;member PrintCommandLineSyntax : ?programName:string * ?usageStringCharacterWidth:int -&gt; string<br />&#160;&#160;member PrintUsage : ?message:string * ?programName:string * ?hideSyntax:bool * ?usageStringCharacterWidth:int -&gt; string<br />&#160;&#160;member ErrorHandler : IExiter<br />&#160;&#160;member HelpDescription : string<br />&#160;&#160;member HelpFlags : string list<br />&#160;&#160;member HelpTextMessage : string option<br />&#160;&#160;...<br /><br />Full name: Argu.ArgumentParser<br /><br />--------------------<br />type ArgumentParser&lt;&#39;Template (requires &#39;Template :&gt; IArgParserTemplate)&gt; =<br />&#160;&#160;inherit ArgumentParser<br />&#160;&#160;new : ?programName:string * ?helpTextMessage:string * ?usageStringCharacterWidth:int * ?errorHandler:IExiter -&gt; ArgumentParser&lt;&#39;Template&gt;<br />&#160;&#160;private new : argInfo:UnionArgInfo * _programName:string * helpTextMessage:string option * _usageStringCharacterWidth:int * errorHandler:IExiter -&gt; ArgumentParser&lt;&#39;Template&gt;<br />&#160;&#160;override Accept : visitor:IArgumentParserVisitor&lt;&#39;a1&gt; -&gt; &#39;a1<br />&#160;&#160;member GetArgumentCaseInfo : ctorExpr:Expr&lt;(&#39;Fields -&gt; &#39;Template)&gt; -&gt; ArgumentCaseInfo<br />&#160;&#160;member GetArgumentCaseInfo : value:&#39;Template -&gt; ArgumentCaseInfo<br />&#160;&#160;member GetSubCommandParser : expr:Expr&lt;(ParseResults&lt;&#39;SubTemplate&gt; -&gt; &#39;Template)&gt; -&gt; ArgumentParser&lt;&#39;SubTemplate&gt; (requires &#39;SubTemplate :&gt; IArgParserTemplate)<br />&#160;&#160;member GetTag : value:&#39;Template -&gt; int<br />&#160;&#160;member Parse : ?inputs:string [] * ?configurationReader:IConfigurationReader * ?ignoreMissing:bool * ?ignoreUnrecognized:bool * ?raiseOnUsage:bool -&gt; ParseResults&lt;&#39;Template&gt;<br />&#160;&#160;member ParseCommandLine : ?inputs:string [] * ?ignoreMissing:bool * ?ignoreUnrecognized:bool * ?raiseOnUsage:bool -&gt; ParseResults&lt;&#39;Template&gt;<br />&#160;&#160;...<br /><br />Full name: Argu.ArgumentParser&lt;_&gt;<br /><br />--------------------<br />new : ?programName:string * ?helpTextMessage:string * ?usageStringCharacterWidth:int * ?errorHandler:IExiter -&gt; ArgumentParser&lt;&#39;Template&gt;</div>
<div class="tip" id="fs218">static member ArgumentParser.Create : ?programName:string * ?helpTextMessage:string * ?usageStringCharacterWidth:int * ?errorHandler:IExiter -&gt; ArgumentParser&lt;#IArgParserTemplate&gt;</div>
<div class="tip" id="fs219">Multiple items<br />type ProcessExiter =<br />&#160;&#160;interface IExiter<br />&#160;&#160;new : ?colorizer:(ErrorCode -&gt; ConsoleColor option) -&gt; ProcessExiter<br /><br />Full name: Argu.ProcessExiter<br /><br />--------------------<br />new : ?colorizer:(ErrorCode -&gt; ConsoleColor option) -&gt; ProcessExiter</div>
<div class="tip" id="fs220">val argResults : ParseResults&lt;Arguments&gt;</div>
<div class="tip" id="fs221">member ArgumentParser.Parse : ?inputs:string [] * ?configurationReader:IConfigurationReader * ?ignoreMissing:bool * ?ignoreUnrecognized:bool * ?raiseOnUsage:bool -&gt; ParseResults&lt;&#39;Template&gt;</div>
<div class="tip" id="fs222">member ParseResults.GetResult : expr:Quotations.Expr&lt;(&#39;Fields -&gt; &#39;Template)&gt; * ?defaultValue:&#39;Fields * ?source:ParseSource -&gt; &#39;Fields<br />member ParseResults.GetResult : expr:Quotations.Expr&lt;&#39;Template&gt; * ?defaultValue:&#39;Template * ?source:ParseSource -&gt; &#39;Template</div>
<div class="tip" id="fs223">property Compiler.Interactive.InteractiveSession.CommandLineArgs: string []</div>
<div class="tip" id="fs224">val args : string []<br /><br />Full name: Index.args</div>
<div class="tip" id="fs225">module Paket</div>
<div class="tip" id="fs226">val download : unit -&gt; unit<br /><br />Full name: Paket.download</div>
<div class="tip" id="fs227">val restore : unit -&gt; unit<br /><br />Full name: Paket.restore</div>
<div class="tip" id="fs228">val generateLoadScripts : framework:string -&gt; unit<br /><br />Full name: Paket.generateLoadScripts</div>

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">
            <section >
<h2>The Agony and the Ecstasy of F# Scripting</h2>
<p><a href="https://emerdelac.files.wordpress.com/2012/05/the-agony-and-the-ecstasy.jpg"><img src="images/the-agony-and-the-ecstasy.jpg" alt="The Agony and the Ecstasy" /></a></p>
<aside class="notes">
Welcome to The Agony and the Ecstasy of F# Scripting workshop.<br/>
This workshop targets beginners but should be informative to those<br/>
with more experience.<br/>
I chose the title based on the movie of a similar name. Are any of you<br/>
familiar with it? The Agony and the Ecstasy covers Michelangelo's painting<br/>
the Cistene Chapel, a beautiful work of art. Scripting can feel like a<br/>
beautful work of art, and it offers a terrific workflow for building programs.<br/>
However it comes with its own, unique set of challenges, and scripts<br/>
have a tendency to fall behind and then get discarded, especially when<br/>
they present frustrating errors.<br/>
</aside>
</section>
<section >
<section >
<h2>Overview</h2>
<aside class="notes">
The goal for this workshop is for you to learn how to leverage F#'s<br/>
scripting capabilities. F# scripting is incredibly useful; however,<br/>
it has some frustrating rough edges.<br/>
In this workshop, we will build a simple ETL application. Along the<br/>
way, I'll highlight the challenging areas and provide solutions for<br/>
overcoming them.<br/>
Show the completed script running.<br/>
</aside>
</section>
<section >
<h3>ETL Applications</h3>
<aside class="notes">
You may wonder why I would choose an ETL application as a workshop<br/>
project. It's a good question. It's exciting to build web server<br/>
applications, especially those with beautiful front-end UIs.<br/>
However, we have a limited time, and in doing this, we would not<br/>
have time enough to cover as many issues peculiar to scripting.<br/>
ETL programs are simple, highlight some of the benefits of using<br/>
F# practically, provide a way of introducing F# into any work<br/>
environment, and lend themselves well to scripting. If you are<br/>
currently using SSIS for ETL projects, you may find an F# replacement<br/>
makes it much easier to parallelize, debug, and deploy.<br/>
</aside>
</section>
</section>
<section >
<section >
<h2>What's not covered?</h2>
<aside class="notes">
We won't have time to cover every aspect of scripting in our two hour<br/>
workshop today. <br/>
</aside>
</section>
<section >
<h3>Working with Databases</h3>
<aside class="notes">
We'll be covering data access, but we won't be covering SQL databases<br/>
in particular. While this is a very common use case, it often requires<br/>
more setup time than we have available.<br/>
However, we will cover accessing config files, which are typically one<br/>
of the more challenging areas of working with databases from scripts.<br/>
</aside>
</section>
<section >
<h3>Fable</h3>
<aside class="notes">
Fable, the F# to JavaScript compiler, is definitely worth your time<br/>
to investigate and expands the possiblities of F# scripting since it<br/>
opens F# to the entire JavaScript ecosystem.<br/>
</aside>
</section>
<section >
<h3>Notebooks</h3>
<aside class="notes">
Jupyter Notebooks, available both locally and in Azure, provide a<br/>
fantastic opportunity for leveraging scripts. The F# integration<br/>
provides several helpers to alleviate some of the pain points<br/>
we'll work through today.<br/>
</aside>
</section>
<section >
<h3>Azure Functions, AWS Lambda, etc.</h3>
<aside class="notes">
One reason to learn more about F# scripts is to leverage them as<br/>
deployable applications in services like Azure Functions, AWS Lambda,<br/>
etc.<br/>
All of these are fantastic topics, and if time permits, we will look<br/>
through a few examples.<br/>
</aside>
</section>
</section>
<section >
<h2>What we will cover</h2>
<ul>
<li>Creating and running scripts</li>
<li>Iterating design</li>
<li>Loading and referencing files</li>
<li>Referencing NuGet packages</li>
<li>Accessing values from .config files</li>
<li>Working with data</li>
<li>Leveraging scripts for <acronym title="Extract-Transform-Load">ETL</acronym></li>
<li>Testing</li>
<li>Visualizing data sets</li>
<li>Accessing command line parameters</li>
<li>Using scripts in a project</li>
<li>Debugging scripts</li>
<li>Build and deploy scripting with FAKE</li>
</ul>
</section>
<section >
<section >
<h2>Getting Started</h2>
<p><a href="https://github.com/panesofglass/scripting-workshop">https://github.com/panesofglass/scripting-workshop</a></p>
<aside class="notes">
Please go to GitHub and pull down the scripting-workshop repository.<br/>
In order to begin, you must have F# installed. I assume you have installed<br/>
it already, but if not, please go to http://fsharp.org/ to find the instructions<br/>
for your environment, or ask for help as we begin the first exercise.<br/>
F# Interactive can be run from the command line or from several IDEs and<br/>
text editors. To begin, please find the correct command line executable<br/>
for your environment. We are going to start simply using the CLI tool for now.<br/>
</aside>
</section>
<section >
<h3>Scripting Workshop</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">/</span><span class="i">scripting</span><span class="o">-</span><span class="i">workshop</span>
  <span class="o">/.</span><span class="i">paket</span>        <span class="o">&lt;-</span> <span class="i">Paket</span> <span class="i">related</span>
  <span class="o">/</span><span class="i">completed</span>     <span class="o">&lt;-</span> <span class="k">in</span> <span class="i">case</span> <span class="i">you</span> <span class="i">get</span> <span class="i">stuck</span>
  <span class="o">/</span><span class="i">exercises</span>     <span class="o">&lt;-</span> <span class="i">working</span> <span class="i">directory</span>
  <span class="o">/</span><span class="i">slides</span>        <span class="o">&lt;-</span> <span onmouseout="hideTip(event, 'fs15', 25)" onmouseover="showTip(event, 'fs15', 25)" class="i">ignore</span>
  <span class="o">-</span> <span class="i">paket</span><span class="o">.</span><span class="i">dependencies</span>
  <span class="o">-</span> <span class="i">paket</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs16', 26)" onmouseover="showTip(event, 'fs16', 26)" class="i">lock</span>
  <span class="o">-</span> <span class="o">..</span><span class="o">.</span> <span class="i">other</span> <span class="i">files</span> 
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3>Finding FSI on Windows</h3>
<p><code>C:\Program Files (x86)\Microsoft SDKs\F#\4.1\Framework\v4.0\fsiAnyCPU.exe</code></p>
<aside class="notes">
F# Interactive is hidden in the Microsoft SDKs folder on Windows and not<br/>
added to the `PATH` by default. It is worth the extra effort to add this<br/>
to your path if you use it regularly.<br/>
</aside>
</section>
<section >
<p><img src="images/agony.png" alt="agony" /></p>
</section>
<section >
<h3>Finding FSI on Mac and Linux</h3>
<p><code>fsharpi</code></p>
<aside class="notes">
Mono adds the alias `fsharpi`. If you run `which fsharpi`, you'll likely<br/>
find it is in a folder in your path, so it's readily accessible.<br/>
</aside>
</section>
<section >
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
</section>
<section >
<h3>F# Interactive in the Terminal</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">F#</span> <span class="i">Interactive</span> <span class="k">for</span> <span class="i">F#</span> <span class="n">4.1</span>
<span class="i">Freely</span> <span class="i">distributed</span> <span class="i">under</span> <span class="i">the</span> <span class="i">Apache</span> <span class="n">2.0</span> <span class="i">Open</span> <span class="i">Source</span> <span class="i">License</span>

<span class="i">For</span> <span class="i">help</span> <span class="k">type</span> #<span class="i">help</span>;;

<span class="o">&gt;</span> 
</code></pre></td>
</tr>
</table>
<aside class="notes">
Please try running the executable on your command line.<br/>
You should see a prompt. F# interactive will let you enter F# code<br/>
and run it immediately. This can be useful for very simple use cases.<br/>
</aside>
</section>
<section >
<h3>Enter <code>2 + 2;;</code></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">&gt;</span> <span class="n">2</span> <span class="o">+</span> <span class="n">2</span>;;
<span class="k">val</span> <span class="i">it</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs17', 27)" onmouseover="showTip(event, 'fs17', 27)" class="i">int</span> <span class="o">=</span> <span class="n">4</span>

<span class="o">&gt;</span> 
</code></pre></td>
</tr>
</table>
<aside class="notes">
You should see the output appear immediately underneath.<br/>
The result is assigned to a value `it`, which is typed as an `int`.<br/>
Note the `;;` at the end. That tells F# Interactive that you are<br/>
done entering the expression, and you want it evaluated.<br/>
</aside>
</section>
<section >
<h3>Enter <code>it;;</code></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">&gt;</span> <span class="i">it</span>;;
<span class="k">val</span> <span class="i">it</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs17', 28)" onmouseover="showTip(event, 'fs17', 28)" class="i">int</span> <span class="o">=</span> <span class="n">4</span>

<span class="o">&gt;</span> 
</code></pre></td>
</tr>
</table>
<aside class="notes">
You can get F# Interactive to repeat the value by entering `it;;`.<br/>
This is useful when working directly within the F# Interactive prompt,<br/>
as you can enter code without assigning it to a name and just use `it`<br/>
when you want to use the result.<br/>
</aside>
</section>
<section >
<h3>Enter <code>let x = it;;</code></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">&gt;</span> <span class="k">let</span> <span class="i">x</span> <span class="o">=</span> <span class="i">it</span>;;
<span class="k">val</span> <span class="i">x</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs17', 29)" onmouseover="showTip(event, 'fs17', 29)" class="i">int</span> <span class="o">=</span> <span class="n">4</span>

<span class="o">&gt;</span> 
</code></pre></td>
</tr>
</table>
<aside class="notes">
You can also write assignments directly within F# Interactive. <br/>
We can assign functions in the same way.<br/>
Note that the value has been assigned to the specified name `x`,<br/>
not `it`. However, you can still access `it` as the F# Interactive<br/>
session retains everything loaded during the session until you<br/>
restart or create a new session.<br/>
</aside>
</section>
<section >
<h3>Enter <code>type MyClass() = member val Name = "" with get, set;;</code></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">&gt;</span> <span class="k">type</span> <span class="i">MyClass</span>() <span class="o">=</span>                      
<span class="o">-</span>     <span class="k">member</span> <span class="k">val</span> <span class="i">Name</span> <span class="o">=</span> <span class="s">&quot;&quot;</span> <span class="k">with</span> <span class="i">get</span>, <span onmouseout="hideTip(event, 'fs18', 30)" onmouseover="showTip(event, 'fs18', 30)" class="i">set</span>;;
<span class="k">type</span> <span class="i">MyClass</span> <span class="o">=</span>
  <span class="k">class</span>
    <span class="k">new</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs19', 31)" onmouseover="showTip(event, 'fs19', 31)" class="i">unit</span> <span class="k">-&gt;</span> <span class="i">MyClass</span>
    <span class="k">member</span> <span class="i">Name</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs20', 32)" onmouseover="showTip(event, 'fs20', 32)" class="i">string</span>
    <span class="k">member</span> <span class="i">Name</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs20', 33)" onmouseover="showTip(event, 'fs20', 33)" class="i">string</span> <span class="k">with</span> <span onmouseout="hideTip(event, 'fs18', 34)" onmouseover="showTip(event, 'fs18', 34)" class="i">set</span>
  <span class="k">end</span>

<span class="o">&gt;</span> 
</code></pre></td>
</tr>
</table>
<aside class="notes">
We can also enter type definitions. Here I've defined a class, but this<br/>
could just as easily be a record, discriminated union, etc.<br/>
In this case, we have a multiline expression, and the `;;` is found<br/>
at the end of the second line.<br/>
</aside>
</section>
<section >
<h3>Enter <code>quit;;</code></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">&gt;</span> #<span class="i">quit</span>;;

<span class="o">-</span> <span class="i">Exit</span><span class="o">..</span><span class="o">.</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
You can exit the F# Interactive prompt with the `#quit;;` command.<br/>
</aside>
</section>
</section>
<section >
<section >
<h2>Creating and Running Scripts</h2>
<aside class="notes">
While you can use F# Interactive directly, you'll find it is far<br/>
more effective to work with script files. F# Interactive was designed<br/>
more as an execution environment than an editing environment and therefore<br/>
provides no syntax highlighting or code completion, at least in most<br/>
environments.<br/>
</aside>
</section>
<section >
<h3>Open a Text Editor</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">$</span> <span class="i">cd</span> <span class="o">~/</span><span class="i">scripting</span><span class="o">-</span><span class="i">workshop</span><span class="o">/</span><span class="i">exercises</span>
<span class="o">$</span> <span class="i">code</span> <span class="i">Script</span><span class="o">.</span><span class="i">fsx</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Let's create a script file with extension `.fsx`.<br/>
Open your favorite IDE or text editor. I'll be using VS Code with Ionide,<br/>
but you can follow along just as well with Visual Studio, Visual Studio for Mac,<br/>
Atom with Ionide, Emacs, Vim, etc. Most editors have an F# plugin<br/>
to provide syntax highlighting at a minimum, as well as F# Interactive integration.<br/>
</aside>
</section>
<section >
<h3>Enter the following code snippets:</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs21', 35)" onmouseover="showTip(event, 'fs21', 35)" class="t">MyClass</span>() <span class="o">=</span>
    <span class="k">member</span> <span class="k">val</span> <span class="v">Name</span> <span class="o">=</span> <span class="s">&quot;&quot;</span> <span class="k">with</span> <span class="i">get</span>, <span onmouseout="hideTip(event, 'fs18', 36)" onmouseover="showTip(event, 'fs18', 36)" class="i">set</span>
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs22', 37)" onmouseover="showTip(event, 'fs22', 37)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs23', 38)" onmouseover="showTip(event, 'fs23', 38)" class="f">Sum</span>(<span onmouseout="hideTip(event, 'fs24', 39)" onmouseover="showTip(event, 'fs24', 39)" class="i">x</span>, <span onmouseout="hideTip(event, 'fs25', 40)" onmouseover="showTip(event, 'fs25', 40)" class="i">y</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs24', 41)" onmouseover="showTip(event, 'fs24', 41)" class="i">x</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs25', 42)" onmouseover="showTip(event, 'fs25', 42)" class="i">y</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 43)" onmouseover="showTip(event, 'fs26', 43)" class="i">x</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs21', 44)" onmouseover="showTip(event, 'fs21', 44)" class="t">MyClass</span>(<span class="i">Name</span> <span class="o">=</span> <span class="s">&quot;Some Name&quot;</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs27', 45)" onmouseover="showTip(event, 'fs27', 45)" class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs26', 46)" onmouseover="showTip(event, 'fs26', 46)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 47)" onmouseover="showTip(event, 'fs28', 47)" class="f">Sum</span>(<span class="n">2</span>, <span class="n">2</span>)
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs29', 48)" onmouseover="showTip(event, 'fs29', 48)" class="f">printfn</span> <span class="s">&quot;</span><span class="pf">%s</span><span class="s">: </span><span class="pf">%i</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs26', 49)" onmouseover="showTip(event, 'fs26', 49)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 50)" onmouseover="showTip(event, 'fs30', 50)" class="i">Name</span> <span onmouseout="hideTip(event, 'fs27', 51)" onmouseover="showTip(event, 'fs27', 51)" class="i">result</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
This code is nothing special. It's merely a snippet to give you<br/>
more than just `2 + 2`. Feel free to write any other F# code you<br/>
like if this snippet gives you the heebie-jeebies.<br/>
We are artists, after all.<br/>
</aside>
</section>
<section >
<h3>Run the Script</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">$</span> <span class="i">fsharpi</span> <span class="i">Script</span><span class="o">.</span><span class="i">fsx</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>Some Name: 4</code></pre></td></tr></table>
<aside class="notes">
You can run the script in several ways.<br/>
You can run it from the command line, as I show above.<br/>
We can also run from the editor, in most cases.<br/>
I have the script opened in Visual Studio Code.<br/>
I can run the script by pressing Alt-Enter or by<br/>
going to the VS Code commands and running the script.<br/>
This same approach should work with any editor you are using,<br/>
though the commands to run the script may differ.<br/>
</aside>
</section>
<section >
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
<aside class="notes">
That wasn't so bad. Now you know how to create and run scripts.<br/>
You most likely already knew at least this much, which is why<br/>
we are quickly moving on ...<br/>
</aside>
</section>
</section>
<section >
<section >
<h2>Loading and Referencing Files</h2>
<aside class="notes">
It's unlikely you'll have many uses for a script as isolated as the<br/>
one above. It's also unwise to try to maintain scripts exceeding<br/>
hundreds or thousands of lines. At some point, you'll want to break<br/>
your script up or reference files or assemblies to provide more<br/>
functionality.<br/>
</aside>
</section>
<section >
<h3>References</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#r</span> <span class="s">&quot;System.Configuration.dll&quot;</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
You reference assemblies with the `#r` directive, followed by the<br/>
path to the assembly. For assemblies stored in the Global Assembly<br/>
Cache, or GAC, you can simply reference the assembly filename.<br/>
Make sure to include the `.dll` suffix, as this needs to be the actual<br/>
filename.<br/>
Note: `#r` uses the script's directory as the relative path to the reference.<br/>
</aside>
</section>
<section >
<h3>CLI References</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">$</span> <span class="i">fsharpi</span> <span class="o">--</span><span class="i">reference</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs1', 52)" onmouseover="showTip(event, 'fs1', 52)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 53)" onmouseover="showTip(event, 'fs31', 53)" class="i">Configuration</span><span class="o">.</span><span class="i">dll</span>

<span class="i">F#</span> <span class="i">Interactive</span> <span class="k">for</span> <span class="i">F#</span> <span class="n">4.1</span>
<span class="i">Freely</span> <span class="i">distributed</span> <span class="i">under</span> <span class="i">the</span> <span class="i">Apache</span> <span class="n">2.0</span> <span class="i">Open</span> <span class="i">Source</span> <span class="i">License</span>

<span class="i">For</span> <span class="i">help</span> <span class="k">type</span> #<span class="i">help</span>;;

<span class="o">&gt;</span> <span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 54)" onmouseover="showTip(event, 'fs1', 54)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 55)" onmouseover="showTip(event, 'fs31', 55)" class="i">Configuration</span>;;
<span class="o">&gt;</span> <span class="i">ConfigurationManager</span><span class="o">.</span><span class="i">AppSettings</span>;;    
<span class="k">val</span> <span class="i">it</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs1', 56)" onmouseover="showTip(event, 'fs1', 56)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs32', 57)" onmouseover="showTip(event, 'fs32', 57)" class="i">Collections</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs33', 58)" onmouseover="showTip(event, 'fs33', 58)" class="i">Specialized</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs34', 59)" onmouseover="showTip(event, 'fs34', 59)" class="i">NameValueCollection</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs35', 60)" onmouseover="showTip(event, 'fs35', 60)" class="i">seq</span> []

<span class="o">&gt;</span> 
</code></pre></td>
</tr>
</table>
<aside class="notes">
You can also add references on the command line. This is useful if you<br/>
a) always want a specific set of references available when running FSI<br/>
or b) want to avoid adding `#r` directives in your scripts.<br/>
Another possibility is to use this and the `no-framework` directive<br/>
to override the version of `FSharp.Core` loaded in Visual Studio 2015's<br/>
F# Interactive. However, this is beyond the scope of this workshop.<br/>
</aside>
</section>
<section >
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
<aside class="notes">
Easy peasy<br/>
</aside>
</section>
<section >
<h3>Loading Files</h3>
<p>Create a new file, <code>Library.fs</code>.</p>
<aside class="notes">
You reference assemblies, and you load files. You can load either<br/>
`.fsi`, `.fs`, or `.fsx` files. Let's add a library file and move<br/>
our `type` definition into it.<br/>
</aside>
</section>
<section >
<h3>Files so far</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">-</span> <span class="i">scripting</span><span class="o">-</span><span class="i">workshop</span>
  <span class="o">-</span> <span class="i">exercises</span>
    <span class="o">-</span> <span class="i">Library</span><span class="o">.</span><span class="i">fs</span>
    <span class="o">-</span> <span class="i">Script</span><span class="o">.</span><span class="i">fsx</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3>Library.fs</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs21', 35)" onmouseover="showTip(event, 'fs21', 35)" class="t">MyClass</span>() <span class="o">=</span>
    <span class="k">member</span> <span class="k">val</span> <span class="v">Name</span> <span class="o">=</span> <span class="s">&quot;&quot;</span> <span class="k">with</span> <span class="i">get</span>, <span onmouseout="hideTip(event, 'fs18', 36)" onmouseover="showTip(event, 'fs18', 36)" class="i">set</span>
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs22', 37)" onmouseover="showTip(event, 'fs22', 37)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs23', 38)" onmouseover="showTip(event, 'fs23', 38)" class="f">Sum</span>(<span onmouseout="hideTip(event, 'fs24', 39)" onmouseover="showTip(event, 'fs24', 39)" class="i">x</span>, <span onmouseout="hideTip(event, 'fs25', 40)" onmouseover="showTip(event, 'fs25', 40)" class="i">y</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs24', 41)" onmouseover="showTip(event, 'fs24', 41)" class="i">x</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs25', 42)" onmouseover="showTip(event, 'fs25', 42)" class="i">y</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3>Script.fsx</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#r</span> <span class="s">&quot;System.Configuration.dll&quot;</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 43)" onmouseover="showTip(event, 'fs26', 43)" class="i">x</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs21', 44)" onmouseover="showTip(event, 'fs21', 44)" class="t">MyClass</span>(<span class="i">Name</span> <span class="o">=</span> <span class="s">&quot;Some Name&quot;</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs27', 45)" onmouseover="showTip(event, 'fs27', 45)" class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs26', 46)" onmouseover="showTip(event, 'fs26', 46)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 47)" onmouseover="showTip(event, 'fs28', 47)" class="f">Sum</span>(<span class="n">2</span>, <span class="n">2</span>)
</code></pre></td>
</tr>
</table>
<aside class="notes">
This is the state of our script so far. However, there's a problem.<br/>
We no longer have access to the `MyClass` type.<br/>
</aside>
</section>
<section >
<h3>Script.fsx</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#r</span> <span class="s">&quot;System.Configuration.dll&quot;</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#load</span> <span class="s">&quot;Library.fs&quot;</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 43)" onmouseover="showTip(event, 'fs26', 43)" class="i">x</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs21', 44)" onmouseover="showTip(event, 'fs21', 44)" class="t">MyClass</span>(<span class="i">Name</span> <span class="o">=</span> <span class="s">&quot;Some Name&quot;</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs27', 45)" onmouseover="showTip(event, 'fs27', 45)" class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs26', 46)" onmouseover="showTip(event, 'fs26', 46)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 47)" onmouseover="showTip(event, 'fs28', 47)" class="f">Sum</span>(<span class="n">2</span>, <span class="n">2</span>)
</code></pre></td>
</tr>
</table>
<aside class="notes">
We can fix this using the `#load` directive.<br/>
</aside>
</section>
<section >
<h3>Run Script.fsx</h3>
<aside class="notes">
Now, run the script again.<br/>
</aside>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">$</span> <span class="i">fsharpi</span> <span class="i">Script</span><span class="o">.</span><span class="i">fsx</span>
<span class="o">/</span><span class="i">Script</span><span class="o">.</span><span class="i">fsx</span>(<span class="n">3</span>,<span class="n">9</span>)<span class="o">:</span> <span class="i">error</span> <span class="i">FS0039</span><span class="o">:</span> <span class="i">The</span> <span class="i">value</span> <span class="k">or</span> <span class="i">constructor</span> <span class="o">&#39;</span><span class="i">MyClass&#39;</span> <span class="i">is</span> <span onmouseout="hideTip(event, 'fs36', 61)" onmouseover="showTip(event, 'fs36', 61)" class="i">not</span> <span class="i">defined</span><span class="o">.</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<p><img src="images/agony.png" alt="agony" /></p>
</section>
<section >
<h3>What went wrong?</h3>
<aside class="notes">
If you are using an editor like VS or VS Code with Ionide,<br/>
your script likely shows red error squiggles. The problem<br/>
is that there's no namespace provided in `Library.fs` yet,<br/>
so F# Interactive assumes a namespace based on the filename.<br/>
</aside>
</section>
<section >
<h3>Script.fsx</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#r</span> <span class="s">&quot;System.Configuration.dll&quot;</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#load</span> <span class="s">&quot;Library.fs&quot;</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span class="i">Library</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 43)" onmouseover="showTip(event, 'fs26', 43)" class="i">x</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs21', 44)" onmouseover="showTip(event, 'fs21', 44)" class="t">MyClass</span>(<span class="i">Name</span> <span class="o">=</span> <span class="s">&quot;Some Name&quot;</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs27', 45)" onmouseover="showTip(event, 'fs27', 45)" class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs26', 46)" onmouseover="showTip(event, 'fs26', 46)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 47)" onmouseover="showTip(event, 'fs28', 47)" class="f">Sum</span>(<span class="n">2</span>, <span class="n">2</span>)
</code></pre></td>
</tr>
</table>
<aside class="notes">
By opening the `Library` namespace, we can get the script to run properly.<br/>
Alternatively, you could provide a namespace in `Library.fs`, which is<br/>
more practical since you'll want that if you plan to use it in a library<br/>
or executable.<br/>
</aside>
</section>
<section >
<h3>Library.fs</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">S</span><span class="o">:</span>
<span class="i">Files</span> <span class="k">in</span> <span class="i">libraries</span> <span class="k">or</span> <span class="i">multiple</span><span class="o">-</span><span class="i">file</span> <span class="i">applications</span> <span class="i">must</span> <span class="k">begin</span>
<span class="k">with</span> <span class="i">a</span> <span class="k">namespace</span> <span class="k">or</span> <span class="k">module</span> <span class="i">declaration</span>, <span class="i">e</span><span class="o">.</span><span class="i">g</span><span class="o">.</span> <span class="o">&#39;</span><span class="k">namespace</span> <span class="i">SomeNamespace</span><span class="o">.</span><span class="i">SubNamespace&#39;</span>
<span class="k">or</span> <span class="o">&#39;</span><span class="k">module</span> <span class="i">SomeNamespace</span><span class="o">.</span><span class="i">SomeModule&#39;</span><span class="o">.</span> <span class="i">Only</span> <span class="i">the</span> <span class="i">last</span> <span class="i">source</span> <span class="i">file</span>
<span class="k">of</span> <span class="i">an</span> <span class="i">application</span> <span class="i">may</span> <span class="i">omit</span> <span class="i">such</span> <span class="i">a</span> <span class="i">declaration</span><span class="o">.</span>

<span class="k">namespace</span> <span class="i">Library</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
If you try to run Script.fsx from the command line, you'll see this error.<br/>
.fs files _should_ have a namespace or module, so go ahead and add<br/>
namespace Library to the top to resolve this error.<br/>
</aside>
</section>
<section >
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
</section>
</section>
<section >
<h2>Iterating Design</h2>
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
<aside class="notes">
Incidentally, this is a very common workflow when designing an application's types.<br/>
You write some code, test it out, modify, then move it into a source file once you<br/>
like the design. You can leave some of the exercise code in the script for later<br/>
iteration or evaluation.<br/>
Design applies to both domain modeling and data modeling.<br/>
For domain modeling, you may want to use scripts to understand<br/>
the ramifications of certain design decisions. For example,<br/>
is a record the right type, or might you need a discriminated<br/>
union to better cover multiple cases, especially if you may need<br/>
more in the future. How might units of measure help or hinder?<br/>
With respect to data modeling, it can be helpful to throw the<br/>
data in a plot. Interactive sessions work well for this, and you<br/>
can check calculations more easily with visualizations.<br/>
</aside>
</section>
<section >
<section >
<h2>Referencing NuGet Packages</h2>
<aside class="notes">
We now know how to reference assmblies available on the local machine,<br/>
as well as files. But what about NuGet packages?<br/>
</aside>
</section>
<section >
<h3><code>nuget.exe</code></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#r</span> <span class="s">&quot;../packages/Argu.3.7.0/lib/net40/Argu.dll&quot;</span> 
<span class="prep">#r</span> <span class="s">&quot;../packages/FSharp.Data.2.3.3/lib/net40/FSharp.Data.dll&quot;</span> 
</code></pre></td>
</tr>
</table>
<aside class="notes">
If you are using NuGet directly, you will find yourself in a world of pain<br/>
and anguish. NuGet installs packages with the version as part of the file<br/>
path by default. While this is helpful if you want multiple versions, it's<br/>
unlikely that is the case. Sure, you can tediously hand-write all the references<br/>
in only a little bit of time, but what happens once you need to update packages?<br/>
In addition, you must also reference any of the package dependencies of each<br/>
referenced package. As you can imagine, this can become quite daunting.<br/>
</aside>
</section>
<section >
<p><img src="images/agony.png" alt="agony" /></p>
</section>
<section >
<h3><a href="https://fsprojects.github.io/Paket">Paket</a></h3>
<ul>
<li>No versions in paths</li>
<li>Consistent, locked versions</li>
<li>Dependency groups</li>
<li><code>generate-load-scripts</code></li>
</ul>
<aside class="notes">
Paket provides a terrific alternative to NuGet. By default, it _does not_<br/>
include paths in versions making your references less prone to breaking.<br/>
It maintains consistent versions throughout your project, so you can't<br/>
accidentally reference different versions of the same dependency.<br/>
You _can_ group dependencies so that you may use different versions of<br/>
a dependency in different contexts. Lastly, and best of all, it provides<br/>
a `generate-load-scripts` command with which you can easily create a single<br/>
load script for all of your paket dependencies.<br/>
Some editors provide utilties for generating package load scripts, but<br/>
the paket command allows you to switch editors at will without worrying<br/>
about different behaviors across editors. This is especially helpful in a<br/>
team setting.<br/>
</aside>
</section>
<section >
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
</section>
<section >
<h3>Add Packages</h3>
<aside class="notes">
Open the `paket.dependencies` file at the root of the `scripting-workshop`<br/>
folder and add the following dependenices, which we will use throughout<br/>
the rest of the workshop:<br/>
</aside>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">nuget</span> <span class="i">Argu</span>
<span class="i">nuget</span> <span class="i">Expecto</span>
<span class="i">nuget</span> <span class="i">Expecto</span><span class="o">.</span><span class="i">BenchmarkDotNet</span>
<span class="i">nuget</span> <span class="i">Expecto</span><span class="o">.</span><span class="i">FsCheck</span>
<span class="i">nuget</span> <span onmouseout="hideTip(event, 'fs37', 62)" onmouseover="showTip(event, 'fs37', 62)" class="i">FSharp</span><span class="o">.</span><span class="i">Configuration</span>
<span class="i">nuget</span> <span onmouseout="hideTip(event, 'fs37', 63)" onmouseover="showTip(event, 'fs37', 63)" class="i">FSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs38', 64)" onmouseover="showTip(event, 'fs38', 64)" class="i">Data</span>
<span class="i">nuget</span> <span class="i">XPlot</span><span class="o">.</span><span class="i">GoogleCharts</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3>Download paket.exe</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">cd</span> <span class="o">.</span><span class="o">./</span>
<span class="o">.</span><span class="o">/.</span><span class="i">paket</span><span class="o">/</span><span class="i">paket</span><span class="o">.</span><span class="i">bootstrapper</span><span class="o">.</span><span class="i">exe</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3>Install dependencies</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">cd</span> <span class="o">.</span><span class="o">./</span>
<span class="o">.</span><span class="o">/.</span><span class="i">paket</span><span class="o">/</span><span class="i">paket</span><span class="o">.</span><span class="i">exe</span> <span class="i">install</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3>Generate Load Scripts</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">.</span><span class="o">/.</span><span class="i">paket</span><span class="o">/</span><span class="i">paket</span><span class="o">.</span><span class="i">exe</span> <span class="i">generate</span><span class="o">-</span><span class="i">load</span><span class="o">-</span><span class="i">scripts</span> <span class="o">--</span><span class="i">group</span> <span class="i">main</span> <span class="o">--</span><span class="k">type</span> <span class="i">fsx</span> <span class="o">--</span><span class="i">framework</span> <span class="i">net461</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Run the paket command to generate fsx load scripts for group main and<br/>
framework net461. This will generate the references necessary for our<br/>
use and no more. Note that you can specify different groups and types,<br/>
the other type being csx for C# Interactive.<br/>
NOTE: if you are on Mac or Linux, you'll need to prefix the above with `mono`.<br/>
</aside>
</section>
<section >
<h3>Load Dependencies</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#load</span> <span class="s">&quot;../.paket/load/net461/main.group.fsx&quot;</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
We can now reference all of our references in one fell swoop!<br/>
</aside>
</section>
<section >
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
</section>
</section>
<section >
<section >
<h2>Accessing Values from .config Files</h2>
<aside class="notes">
We are about to switch to accessing a data set. However, the data set<br/>
we want requires an application key. Where do you typically store such<br/>
secrets? In a config file, of course!<br/>
</aside>
</section>
<section >
<h3>Add an <code>App.config</code> file</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">&lt;?</span><span class="i">xml</span> <span class="i">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span> <span class="i">encoding</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span><span class="o">?&gt;</span>
<span class="o">&lt;</span><span class="i">configuration</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="i">appSettings</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="i">add</span> <span class="i">key</span><span class="o">=</span><span class="s">&quot;AppKey&quot;</span> <span class="i">value</span><span class="o">=</span><span class="s">&quot;7B7EB384FEBA4409B56066FF63F1E8D0&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="i">add</span> <span class="i">key</span><span class="o">=</span><span class="s">&quot;test2&quot;</span> <span class="i">value</span><span class="o">=</span><span class="s">&quot;Some Test Value 5&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="i">add</span> <span class="i">key</span><span class="o">=</span><span class="s">&quot;TestInt&quot;</span> <span class="i">value</span><span class="o">=</span><span class="s">&quot;102&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="i">add</span> <span class="i">key</span><span class="o">=</span><span class="s">&quot;TestBool&quot;</span> <span class="i">value</span><span class="o">=</span><span class="s">&quot;True&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="i">add</span> <span class="i">key</span><span class="o">=</span><span class="s">&quot;TestDouble&quot;</span> <span class="i">value</span><span class="o">=</span><span class="s">&quot;10.01&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="i">add</span> <span class="i">key</span><span class="o">=</span><span class="s">&quot;TestTimeSpan&quot;</span> <span class="i">value</span><span class="o">=</span><span class="s">&quot;2.01:02:03.444&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="i">add</span> <span class="i">key</span><span class="o">=</span><span class="s">&quot;TestDateTime&quot;</span> <span class="i">value</span><span class="o">=</span><span class="s">&quot;02/01/2014 03:04:05.777&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="i">add</span> <span class="i">key</span><span class="o">=</span><span class="s">&quot;TestUri&quot;</span> <span class="i">value</span><span class="o">=</span><span class="s">&quot;http://fsharp.org&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="i">add</span> <span class="i">key</span><span class="o">=</span><span class="s">&quot;TestGuid&quot;</span> <span class="i">value</span><span class="o">=</span><span class="s">&quot;{7B7EB384-FEBA-4409-B560-66FF63F1E8D0}&quot;</span> <span class="o">/&gt;</span>
  <span class="o">&lt;/</span><span class="i">appSettings</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="i">connectionStrings</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="i">add</span> <span class="i">name</span><span class="o">=</span><span class="s">&quot;Test1&quot;</span>
      <span class="i">connectionString</span><span class="o">=</span><span class="s">&quot;Server=.;Database=myDataBase;Integrated Security=True;&quot;</span> <span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="i">add</span> <span class="i">name</span><span class="o">=</span><span class="s">&quot;Test2&quot;</span>
      <span class="i">connectionString</span><span class="o">=</span><span class="s">&quot;Server=.;Database=myDataBase2;Integrated Security=True;&quot;</span> <span class="o">/&gt;</span>
  <span class="o">&lt;/</span><span class="i">connectionStrings</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="i">configuration</span><span class="o">&gt;</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3>Create <code>AppSettings.fsx</code></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#r</span> <span class="s">&quot;System.Configuration.dll&quot;</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 65)" onmouseover="showTip(event, 'fs1', 65)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 66)" onmouseover="showTip(event, 'fs31', 66)" class="i">Configuration</span>

<span onmouseout="hideTip(event, 'fs39', 67)" onmouseover="showTip(event, 'fs39', 67)" class="t">ConfigurationManager</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs40', 68)" onmouseover="showTip(event, 'fs40', 68)" class="i">AppSettings</span><span class="o">.</span>[<span class="s">&quot;test2&quot;</span>]
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>&lt;null&gt;</code></pre></td></tr></table>
<aside class="notes">
Create an AppSettings.fsx script to get a clean slate.<br/>
Add teh following code to retrieve the `test2` setting.<br/>
</aside>
</section>
<section >
<p><img src="images/agony.png" alt="agony" /></p>
</section>
<section >
<h3>What went wrong?</h3>
</section>
<section >
<h3>Problem 1: CurrentDirectory</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs1', 72)" onmouseover="showTip(event, 'fs1', 72)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 73)" onmouseover="showTip(event, 'fs3', 73)" class="t">Environment</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs4', 74)" onmouseover="showTip(event, 'fs4', 74)" class="i">CurrentDirectory</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>"/Users/admin/Code/scripting-workshop/slides"</code></pre></td></tr></table>
<aside class="notes">
The first problem is that the script is not necessarily running it its own folder.<br/>
The current directory returned is the directory in which F# Interactive is running.<br/>
Depending on where and how you run your script, you may not be able to access<br/>
the config file you want.<br/>
</aside>
</section>
<section >
<h3>Change the Current Directory</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs1', 75)" onmouseover="showTip(event, 'fs1', 75)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 76)" onmouseover="showTip(event, 'fs3', 76)" class="t">Environment</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs4', 77)" onmouseover="showTip(event, 'fs4', 77)" class="i">CurrentDirectory</span> <span class="o">&lt;-</span> <span class="k">__SOURCE_DIRECTORY__</span>
<span onmouseout="hideTip(event, 'fs1', 78)" onmouseover="showTip(event, 'fs1', 78)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 79)" onmouseover="showTip(event, 'fs3', 79)" class="t">Environment</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs4', 80)" onmouseover="showTip(event, 'fs4', 80)" class="i">CurrentDirectory</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>"/Users/admin/Code/scripting-workshop/slides"</code></pre></td></tr></table>
<aside class="notes">
We can set the current directory using this line of code.<br/>
You'll typically want to work from your source directory.<br/>
Try adding this line just after opening `System.Configuration`,<br/>
restart your environment, and try again.<br/>
</aside>
</section>
<section >
<table class="pre"><tr><td><pre><code>&lt;null&gt;</code></pre></td></tr></table>
</section>
<section >
<p><img src="images/agony.png" alt="agony" /></p>
</section>
<section >
<h3>Problem 2: Script <> App</h3>
<aside class="notes">
You should still see nothing. That's expected. You are running a script,<br/>
and the script doesn't know how to access the config file. What's more,<br/>
`ConfigurationManager doesn't access an `App.config` file at runtime;<br/>
it accesses the program name `.dll.config` or `.exe.config`.<br/>
We can solve this in one of two ways.<br/>
</aside>
</section>
<section >
<h3>Solution 1: FSharp.Configuration</h3>
<aside class="notes">
We'll now take a look at the FSharp.Configuration type provider.<br/>
This is an excellent tool for accessing config file values and even <br/>
attempts to type check them for you.<br/>
</aside>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs42', 81)" onmouseover="showTip(event, 'fs42', 81)" class="i">FSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs43', 82)" onmouseover="showTip(event, 'fs43', 82)" class="i">Configuration</span>

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs44', 83)" onmouseover="showTip(event, 'fs44', 83)" class="t">Settings1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs45', 84)" onmouseover="showTip(event, 'fs45', 84)" class="t">AppSettings</span><span class="o">&lt;</span><span class="s">&quot;App.config&quot;</span><span class="o">&gt;</span>

<span class="c">// Enter:</span>
<span onmouseout="hideTip(event, 'fs44', 85)" onmouseover="showTip(event, 'fs44', 85)" class="t">Settings1</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs46', 86)" onmouseover="showTip(event, 'fs46', 86)" class="i">Test2</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
What do you see when you try to enter `Settings1.Test2`?<br/>
</aside>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">error</span> <span class="i">FS0039</span><span class="o">:</span> <span class="i">The</span> <span class="i">field</span>, <span class="i">constructor</span> <span class="k">or</span> <span class="k">member</span> <span class="o">&#39;</span><span class="i">Test2&#39;</span> <span class="i">is</span> <span onmouseout="hideTip(event, 'fs36', 98)" onmouseover="showTip(event, 'fs36', 98)" class="i">not</span> <span class="i">defined</span><span class="o">.</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
The most obvious thing, and the one that works when using the type provider in a library<br/>
or executable, fails in a script file. When using FSharp.Configuration in a script, you<br/>
have to also set the executable file.<br/>
</aside>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs44', 88)" onmouseover="showTip(event, 'fs44', 88)" class="t">Settings1</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs47', 89)" onmouseover="showTip(event, 'fs47', 89)" class="f">SelectExecutableFile</span> <span class="s">&quot;AppSettings.fsx&quot;</span>

<span onmouseout="hideTip(event, 'fs44', 90)" onmouseover="showTip(event, 'fs44', 90)" class="t">Settings1</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs46', 91)" onmouseover="showTip(event, 'fs46', 91)" class="i">Test2</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
For a script, that is the script filename. Add the above lines and try to enter<br/>
`Settings1.Test2` again. Now what do you see?<br/>
</aside>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">error</span> <span class="i">FS0039</span><span class="o">:</span> <span class="i">The</span> <span class="i">field</span>, <span class="i">constructor</span> <span class="k">or</span> <span class="k">member</span> <span class="o">&#39;</span><span class="i">Test2&#39;</span> <span class="i">is</span> <span onmouseout="hideTip(event, 'fs36', 98)" onmouseover="showTip(event, 'fs36', 98)" class="i">not</span> <span class="i">defined</span><span class="o">.</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
What's going on? If you think about it, you'll realize the problem. What's the<br/>
name of the `config` file once you've compiled a library or executable project?<br/>
It's Name.exe.config or Name.dll.config. FSharp.Configuration is anticipating the<br/>
same thing here.<br/>
</aside>
</section>
<section >
<h3>Rename App.config to AppSettings.fsx.config</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs48', 93)" onmouseover="showTip(event, 'fs48', 93)" class="t">Settings2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs45', 94)" onmouseover="showTip(event, 'fs45', 94)" class="t">AppSettings</span><span class="o">&lt;</span><span class="s">&quot;AppSettings.fsx.config&quot;</span><span class="o">&gt;</span>
<span onmouseout="hideTip(event, 'fs48', 95)" onmouseover="showTip(event, 'fs48', 95)" class="t">Settings2</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs47', 96)" onmouseover="showTip(event, 'fs47', 96)" class="f">SelectExecutableFile</span> <span class="s">&quot;AppSettings.fsx&quot;</span>

<span onmouseout="hideTip(event, 'fs48', 97)" onmouseover="showTip(event, 'fs48', 97)" class="i">Settings2</span><span class="o">.</span><span class="i">Test2</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Rename the App.config to AppSettings.fsx.config, the name the file would have<br/>
if you were to compile an application and try it again.<br/>
Note: I've renamed my Settings type here purely to help with generating slides.<br/>
</aside>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">error</span> <span class="i">FS0039</span><span class="o">:</span> <span class="i">The</span> <span class="i">field</span>, <span class="i">constructor</span> <span class="k">or</span> <span class="k">member</span> <span class="o">&#39;</span><span class="i">Test2&#39;</span> <span class="i">is</span> <span onmouseout="hideTip(event, 'fs36', 98)" onmouseover="showTip(event, 'fs36', 98)" class="i">not</span> <span class="i">defined</span><span class="o">.</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<p><img src="images/agony.png" alt="agony" /></p>
<aside class="notes">
Are you serious?! What is going on here? Why are you playing tricks on me?!<br/>
This is the point where you begin to swear off scripting. Why must it be so<br/>
hard?!<br/>
</aside>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> [&lt;<span onmouseout="hideTip(event, 'fs49', 99)" onmouseover="showTip(event, 'fs49', 99)" class="t">Literal</span>&gt;] <span onmouseout="hideTip(event, 'fs50', 100)" onmouseover="showTip(event, 'fs50', 100)" class="i">AppSettingsConfig</span> <span class="o">=</span>
    <span class="k">__SOURCE_DIRECTORY__</span> <span class="o">+</span> <span class="s">&quot;/AppSettings.fsx.config&quot;</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs51', 101)" onmouseover="showTip(event, 'fs51', 101)" class="t">Settings</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs45', 102)" onmouseover="showTip(event, 'fs45', 102)" class="t">AppSettings</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs50', 103)" onmouseover="showTip(event, 'fs50', 103)" class="i">AppSettingsConfig</span><span class="o">&gt;</span>
<span class="k">let</span> [&lt;<span onmouseout="hideTip(event, 'fs49', 104)" onmouseover="showTip(event, 'fs49', 104)" class="t">Literal</span>&gt;] <span onmouseout="hideTip(event, 'fs52', 105)" onmouseover="showTip(event, 'fs52', 105)" class="i">AppSettingsExe</span> <span class="o">=</span>
    <span class="k">__SOURCE_DIRECTORY__</span> <span class="o">+</span> <span class="s">&quot;/AppSettings.fsx&quot;</span>
<span onmouseout="hideTip(event, 'fs51', 106)" onmouseover="showTip(event, 'fs51', 106)" class="t">Settings</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs47', 107)" onmouseover="showTip(event, 'fs47', 107)" class="f">SelectExecutableFile</span> <span onmouseout="hideTip(event, 'fs52', 108)" onmouseover="showTip(event, 'fs52', 108)" class="i">AppSettingsExe</span>

<span onmouseout="hideTip(event, 'fs51', 109)" onmouseover="showTip(event, 'fs51', 109)" class="i">Settings</span><span class="o">.</span><span class="i">Test2</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
It turns out you need to specify the full path for this to work properly in scripts.<br/>
You can use the `__SOURCE_DIRECTORY__` directive to git the path to the current script<br/>
and then add the remaining file name part. This can be captured as a string literal,<br/>
so you can use it in places like type provider parameters.<br/>
If you run this now, you'll get the value from Test2.<br/>
Try some of the other settings, and you'll see that the type provider is quite handy<br/>
at returning values that are typed.<br/>
</aside>
</section>
<section >
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
</section>
<section >
<h3>Retrieve the value for AppKey</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs51', 123)" onmouseover="showTip(event, 'fs51', 123)" class="i">Settings</span><span class="o">.</span><span class="i">AppKey</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<table class="pre"><tr><td><pre><code>No value has been returned</code></pre></td></tr></table>
<aside class="notes">
The poor type provider was tricked. It found a string with the same length and<br/>
alphanumeric characteristics as a Guid, so it converted it.<br/>
</aside>
</section>
<section >
<p><img src="images/agony.png" alt="agony" /></p>
</section>
<section >
<h3>Solution 2: Override ConfigurationManager</h3>
<aside class="notes">
When all else fails, you can replace the System.Configuration.ConfigurationManager<br/>
with a simple script.<br/>
</aside>
</section>
<section >
<h3>Configuration.fsx</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#r</span> <span class="s">&quot;System.Xml.dll&quot;</span>
<span class="prep">#r</span> <span class="s">&quot;System.Xml.Linq.dll&quot;</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 124)" onmouseover="showTip(event, 'fs1', 124)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs58', 125)" onmouseover="showTip(event, 'fs58', 125)" class="i">Xml</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 126)" onmouseover="showTip(event, 'fs1', 126)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs58', 127)" onmouseover="showTip(event, 'fs58', 127)" class="i">Xml</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs59', 128)" onmouseover="showTip(event, 'fs59', 128)" class="i">Linq</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Create a new file called Configuration.fsx. At the top, add references to System.Xml.dll<br/>
and System.Xml.Linq.dll, then open those namespaces.<br/>
</aside>
</section>
<section >
<h3>Configuration.fsx</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> [&lt;<span onmouseout="hideTip(event, 'fs49', 129)" onmouseover="showTip(event, 'fs49', 129)" class="t">Literal</span>&gt;] <span onmouseout="hideTip(event, 'fs60', 130)" onmouseover="showTip(event, 'fs60', 130)" class="i">AppSettingsPath</span> <span class="o">=</span> <span class="k">__SOURCE_DIRECTORY__</span> <span class="o">+</span> <span class="s">&quot;/App.config&quot;</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Here we again use the absolute path string literal to specify the config file we want<br/>
to reference. This makes the script less portable, but it's the only way to properly<br/>
hijack the ConfigurationManager class, which uses static members.<br/>
</aside>
</section>
<section >
<h3>Configuration.fsx</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs61', 131)" onmouseover="showTip(event, 'fs61', 131)" class="f">ConfigurationManager</span>() <span class="o">=</span>
    <span class="k">static</span> <span class="k">let</span> <span onmouseout="hideTip(event, 'fs62', 132)" onmouseover="showTip(event, 'fs62', 132)" class="i">config</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs63', 133)" onmouseover="showTip(event, 'fs63', 133)" class="t">XDocument</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs64', 134)" onmouseover="showTip(event, 'fs64', 134)" class="f">Load</span> <span onmouseout="hideTip(event, 'fs60', 135)" onmouseover="showTip(event, 'fs60', 135)" class="i">AppSettingsPath</span>
    <span class="k">static</span> <span class="k">let</span> <span onmouseout="hideTip(event, 'fs65', 136)" onmouseover="showTip(event, 'fs65', 136)" class="f">section</span> (<span onmouseout="hideTip(event, 'fs62', 137)" onmouseover="showTip(event, 'fs62', 137)" class="i">config</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs63', 138)" onmouseover="showTip(event, 'fs63', 138)" class="t">XDocument</span>) <span onmouseout="hideTip(event, 'fs66', 139)" onmouseover="showTip(event, 'fs66', 139)" class="i">name</span> <span onmouseout="hideTip(event, 'fs67', 140)" onmouseover="showTip(event, 'fs67', 140)" class="i">key</span> <span onmouseout="hideTip(event, 'fs68', 141)" onmouseover="showTip(event, 'fs68', 141)" class="i">value</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs69', 142)" onmouseover="showTip(event, 'fs69', 142)" class="i">query</span> {
            <span class="k">for</span> <span onmouseout="hideTip(event, 'fs70', 143)" onmouseover="showTip(event, 'fs70', 143)" class="i">els</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs62', 144)" onmouseover="showTip(event, 'fs62', 144)" class="i">config</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs71', 145)" onmouseover="showTip(event, 'fs71', 145)" class="f">Descendants</span>(<span onmouseout="hideTip(event, 'fs72', 146)" onmouseover="showTip(event, 'fs72', 146)" class="t">XName</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs73', 147)" onmouseover="showTip(event, 'fs73', 147)" class="f">Get</span> <span onmouseout="hideTip(event, 'fs66', 148)" onmouseover="showTip(event, 'fs66', 148)" class="i">name</span>) <span class="k">do</span>
            <span class="k">for</span> <span onmouseout="hideTip(event, 'fs74', 149)" onmouseover="showTip(event, 'fs74', 149)" class="i">el</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs70', 150)" onmouseover="showTip(event, 'fs70', 150)" class="i">els</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs71', 151)" onmouseover="showTip(event, 'fs71', 151)" class="f">Descendants</span>(<span onmouseout="hideTip(event, 'fs72', 152)" onmouseover="showTip(event, 'fs72', 152)" class="t">XName</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs73', 153)" onmouseover="showTip(event, 'fs73', 153)" class="f">Get</span> <span class="s">&quot;add&quot;</span>) <span class="k">do</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs75', 154)" onmouseover="showTip(event, 'fs75', 154)" class="i">k</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs74', 155)" onmouseover="showTip(event, 'fs74', 155)" class="i">el</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs76', 156)" onmouseover="showTip(event, 'fs76', 156)" class="f">Attribute</span>(<span onmouseout="hideTip(event, 'fs72', 157)" onmouseover="showTip(event, 'fs72', 157)" class="t">XName</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs73', 158)" onmouseover="showTip(event, 'fs73', 158)" class="f">Get</span> <span onmouseout="hideTip(event, 'fs67', 159)" onmouseover="showTip(event, 'fs67', 159)" class="i">key</span>)<span class="o">.</span><span class="i">Value</span> 
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs77', 160)" onmouseover="showTip(event, 'fs77', 160)" class="i">v</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs74', 161)" onmouseover="showTip(event, 'fs74', 161)" class="i">el</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs76', 162)" onmouseover="showTip(event, 'fs76', 162)" class="f">Attribute</span>(<span onmouseout="hideTip(event, 'fs72', 163)" onmouseover="showTip(event, 'fs72', 163)" class="t">XName</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs73', 164)" onmouseover="showTip(event, 'fs73', 164)" class="f">Get</span> <span onmouseout="hideTip(event, 'fs68', 165)" onmouseover="showTip(event, 'fs68', 165)" class="i">value</span>)<span class="o">.</span><span class="i">Value</span> 
            <span onmouseout="hideTip(event, 'fs78', 166)" onmouseover="showTip(event, 'fs78', 166)" class="k">select</span> (<span onmouseout="hideTip(event, 'fs75', 167)" onmouseover="showTip(event, 'fs75', 167)" class="i">k</span>,<span onmouseout="hideTip(event, 'fs77', 168)" onmouseover="showTip(event, 'fs77', 168)" class="i">v</span>)
        } <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs79', 169)" onmouseover="showTip(event, 'fs79', 169)" class="f">dict</span>
    <span class="k">static</span> <span class="k">let</span> <span onmouseout="hideTip(event, 'fs80', 170)" onmouseover="showTip(event, 'fs80', 170)" class="i">appSettings</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs65', 171)" onmouseover="showTip(event, 'fs65', 171)" class="f">section</span> <span onmouseout="hideTip(event, 'fs62', 172)" onmouseover="showTip(event, 'fs62', 172)" class="i">config</span> <span class="s">&quot;appSettings&quot;</span> <span class="s">&quot;key&quot;</span> <span class="s">&quot;value&quot;</span>
    <span class="k">static</span> <span class="k">let</span> <span onmouseout="hideTip(event, 'fs81', 173)" onmouseover="showTip(event, 'fs81', 173)" class="i">connectionStrings</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs65', 174)" onmouseover="showTip(event, 'fs65', 174)" class="f">section</span> <span onmouseout="hideTip(event, 'fs62', 175)" onmouseover="showTip(event, 'fs62', 175)" class="i">config</span> <span class="s">&quot;connectionStrings&quot;</span> <span class="s">&quot;name&quot;</span> <span class="s">&quot;connectionString&quot;</span>
    <span class="k">static</span> <span class="k">member</span> <span onmouseout="hideTip(event, 'fs82', 176)" onmouseover="showTip(event, 'fs82', 176)" class="i">AppSettings</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs80', 177)" onmouseover="showTip(event, 'fs80', 177)" class="i">appSettings</span>
    <span class="k">static</span> <span class="k">member</span> <span onmouseout="hideTip(event, 'fs83', 178)" onmouseover="showTip(event, 'fs83', 178)" class="i">ConnectionStrings</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs81', 179)" onmouseover="showTip(event, 'fs81', 179)" class="i">connectionStrings</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
The guts of the ConfigurationManager class are not that complex. We have a static, let-bound<br/>
function that loads and queries the provides config file and returns it as a dictionary, based<br/>
on the section. I've only implemented the appSettings and connectionStrings portions here, but<br/>
you can certainly add sections you want or need.<br/>
</aside>
</section>
<section >
<h3>Use Configuration.fsx</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#load</span> <span class="s">&quot;Configuration.fsx&quot;</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs84', 180)" onmouseover="showTip(event, 'fs84', 180)" class="i">Configuration</span>

<span onmouseout="hideTip(event, 'fs39', 181)" onmouseover="showTip(event, 'fs39', 181)" class="t">ConfigurationManager</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs85', 182)" onmouseover="showTip(event, 'fs85', 182)" class="i">AppSettings</span><span class="o">.</span>[<span class="s">&quot;AppKey&quot;</span>]
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>"9050511f2aa54cc1a2be31a64af63804"</code></pre></td></tr></table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs39', 186)" onmouseover="showTip(event, 'fs39', 186)" class="t">ConfigurationManager</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs87', 187)" onmouseover="showTip(event, 'fs87', 187)" class="i">ConnectionStrings</span><span class="o">.</span>[<span class="s">&quot;Test1&quot;</span>]
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>"Server=.;Database=myDataBase;Integrated Security=True;"</code></pre></td></tr></table>
<aside class="notes">
Go back to your AppSettings.fsx script and enter the following lines. Remembering that the<br/>
script name is used as the namespace, we open Configuration after loading the file. So long<br/>
as you load and open this Configuraiton after System.Configuration, this will hide the<br/>
System.Configuration.ConfigurationManager, and you will be able to access whatever file you've<br/>
specified in the Configuration.fsx script.<br/>
</aside>
</section>
<section >
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
</section>
<section >
<h3>Remember: Always Use <code>__SOURCE_DIRECTORY__</code></h3>
<aside class="notes">
You now have two possible solutions you can leverage in your scripts. These strategies<br/>
work for connection strings used with the various type providers, as well. It's always<br/>
a good strategy to prefix a path to a config file with `__SOURCE_DIRECTORY__` to avoid<br/>
issues with your scripts.<br/>
</aside>
</section>
</section>
<section >
<section >
<h2>Working with Data</h2>
<aside class="notes">
Let's start working on our ETL tool. First, we need to get some data.<br/>
Create a new script named App.fsx.<br/>
</aside>
</section>
<section >
<h3>OpenCage GeoCoder</h3>
<p><a href="https://geocoder.opencagedata.com/">https://geocoder.opencagedata.com/</a></p>
<aside class="notes">
We'll use OpenCage GeoCoder to retrieve a list of locations matching<br/>
a specified query parameter.<br/>
</aside>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs42', 191)" onmouseover="showTip(event, 'fs42', 191)" class="i">FSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs89', 192)" onmouseover="showTip(event, 'fs89', 192)" class="i">Data</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs86', 193)" onmouseover="showTip(event, 'fs86', 193)" class="i">appKey</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs39', 194)" onmouseover="showTip(event, 'fs39', 194)" class="t">ConfigurationManager</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs85', 195)" onmouseover="showTip(event, 'fs85', 195)" class="i">AppSettings</span><span class="o">.</span>[<span class="s">&quot;AppKey&quot;</span>]

<span class="k">let</span> [&lt;<span onmouseout="hideTip(event, 'fs49', 196)" onmouseover="showTip(event, 'fs49', 196)" class="t">Literal</span>&gt;] <span onmouseout="hideTip(event, 'fs90', 197)" onmouseover="showTip(event, 'fs90', 197)" class="i">``geocoding.json``</span> <span class="o">=</span>
    <span class="k">__SOURCE_DIRECTORY__</span> <span class="o">+</span> <span class="s">&quot;/geocoding.json&quot;</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs91', 198)" onmouseover="showTip(event, 'fs91', 198)" class="t">Location</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs92', 199)" onmouseover="showTip(event, 'fs92', 199)" class="t">JsonProvider</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs90', 200)" onmouseover="showTip(event, 'fs90', 200)" class="i">``geocoding.json``</span><span class="o">&gt;</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs93', 201)" onmouseover="showTip(event, 'fs93', 201)" class="f">extract</span> <span onmouseout="hideTip(event, 'fs94', 202)" onmouseover="showTip(event, 'fs94', 202)" class="i">city</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs95', 203)" onmouseover="showTip(event, 'fs95', 203)" class="i">uri</span> <span class="o">=</span>
        <span class="s">&quot;https://api.opencagedata.com/geocode/v1/json?q=&quot;</span>
        <span class="o">+</span> <span onmouseout="hideTip(event, 'fs94', 204)" onmouseover="showTip(event, 'fs94', 204)" class="i">city</span>
        <span class="o">+</span> <span class="s">&quot;&amp;pretty=1&amp;no_annotations=1&amp;key=&quot;</span>
        <span class="o">+</span> <span onmouseout="hideTip(event, 'fs86', 205)" onmouseover="showTip(event, 'fs86', 205)" class="i">appKey</span>
    <span onmouseout="hideTip(event, 'fs91', 206)" onmouseover="showTip(event, 'fs91', 206)" class="i">Location</span><span class="o">.</span><span class="i">Load</span>(<span onmouseout="hideTip(event, 'fs95', 207)" onmouseover="showTip(event, 'fs95', 207)" class="i">uri</span>)
</code></pre></td>
</tr>
</table>
<aside class="notes">
This is quite a bit of code, so let's break it down.<br/>
First, we are using FSharp.Data.JsonProvider, so we<br/>
need to open FSharp.Data<br/>
I've taken the liberty to save a copy of a sample<br/>
response. When using JsonProvider with scripts, it's<br/>
often helpful to copy the response. In this case, the<br/>
API call is rate limited, so using the actual url to<br/>
request a response to generate types can cost you a<br/>
number of requests, especially if you are reloading your<br/>
interactive environment often.<br/>
The response output is used to define a type called Location.<br/>
The extract function accepts a city (or general location),<br/>
populates the request URI with the input and the appKey,<br/>
then loads the response into the Location type.<br/>
</aside>
</section>
<section >
<h3>Call <code>extract</code></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs96', 208)" onmouseover="showTip(event, 'fs96', 208)" class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs93', 209)" onmouseover="showTip(event, 'fs93', 209)" class="f">extract</span> <span class="s">&quot;Adelaide&quot;</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
You should receive a result with one or more location results.<br/>
It should match the format of the geocoding.json file.<br/>
</aside>
</section>
<section >
<h2>Leveraging Scripts for <acronym title="Extract-Transform-Load">ETL</acronym></h2>
<aside class="notes">
We have some data, but what can you do with it? Let's look at how we might<br/>
write a little extract-transform-load script.<br/>
</aside>
</section>
<section >
<h3>Defining Domain Types</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs97', 210)" onmouseover="showTip(event, 'fs97', 210)" class="t">LocationResult</span> <span class="o">=</span>
  { <span onmouseout="hideTip(event, 'fs98', 211)" onmouseover="showTip(event, 'fs98', 211)" class="i">DisplayName</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs99', 212)" onmouseover="showTip(event, 'fs99', 212)" class="t">string</span>
    <span onmouseout="hideTip(event, 'fs100', 213)" onmouseover="showTip(event, 'fs100', 213)" class="i">Latitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs101', 214)" onmouseover="showTip(event, 'fs101', 214)" class="t">float</span>
    <span onmouseout="hideTip(event, 'fs102', 215)" onmouseover="showTip(event, 'fs102', 215)" class="i">Longitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs101', 216)" onmouseover="showTip(event, 'fs101', 216)" class="t">float</span>
    <span onmouseout="hideTip(event, 'fs103', 217)" onmouseover="showTip(event, 'fs103', 217)" class="i">City</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs99', 218)" onmouseover="showTip(event, 'fs99', 218)" class="t">string</span>
    <span onmouseout="hideTip(event, 'fs104', 219)" onmouseover="showTip(event, 'fs104', 219)" class="i">State</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs99', 220)" onmouseover="showTip(event, 'fs99', 220)" class="t">string</span>
    <span onmouseout="hideTip(event, 'fs105', 221)" onmouseover="showTip(event, 'fs105', 221)" class="i">Country</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs99', 222)" onmouseover="showTip(event, 'fs99', 222)" class="t">string</span>
    <span onmouseout="hideTip(event, 'fs106', 223)" onmouseover="showTip(event, 'fs106', 223)" class="i">CountryCode</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs99', 224)" onmouseover="showTip(event, 'fs99', 224)" class="t">string</span>
    <span onmouseout="hideTip(event, 'fs107', 225)" onmouseover="showTip(event, 'fs107', 225)" class="i">EnergyUse</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs108', 226)" onmouseover="showTip(event, 'fs108', 226)" class="i">Runtime</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs109', 227)" onmouseover="showTip(event, 'fs109', 227)" class="i">WorldBank</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs110', 228)" onmouseover="showTip(event, 'fs110', 228)" class="t">Indicator</span> <span onmouseout="hideTip(event, 'fs111', 229)" onmouseover="showTip(event, 'fs111', 229)" class="t">option</span> }
</code></pre></td>
</tr>
</table>
<aside class="notes">
While the type provider generates a type matching the source data,<br/>
we don't want either the returned shape nor all the detail returned.<br/>
Let's define our own LocationResult type into which we'll format<br/>
our data set.<br/>
</aside>
</section>
<section >
<h3>Define <code>transformSimple</code></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs112', 230)" onmouseover="showTip(event, 'fs112', 230)" class="f">transformSimple</span> (<span onmouseout="hideTip(event, 'fs113', 231)" onmouseover="showTip(event, 'fs113', 231)" class="i">source</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs91', 232)" onmouseover="showTip(event, 'fs91', 232)" class="i">Location</span><span class="o">.</span><span class="i">Root</span>) <span class="o">:</span> <span onmouseout="hideTip(event, 'fs97', 233)" onmouseover="showTip(event, 'fs97', 233)" class="t">LocationResult</span> <span onmouseout="hideTip(event, 'fs114', 234)" onmouseover="showTip(event, 'fs114', 234)" class="t">list</span> <span class="o">=</span>
    [ <span class="k">for</span> <span onmouseout="hideTip(event, 'fs115', 235)" onmouseover="showTip(event, 'fs115', 235)" class="i">result</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs113', 236)" onmouseover="showTip(event, 'fs113', 236)" class="i">source</span><span class="o">.</span><span class="i">Results</span> <span class="k">-&gt;</span>
        { <span class="i">DisplayName</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs115', 237)" onmouseover="showTip(event, 'fs115', 237)" class="i">result</span><span class="o">.</span><span class="i">Formatted</span>
          <span class="i">Latitude</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs101', 238)" onmouseover="showTip(event, 'fs101', 238)" class="f">float</span> <span onmouseout="hideTip(event, 'fs115', 239)" onmouseover="showTip(event, 'fs115', 239)" class="i">result</span><span class="o">.</span><span class="i">Geometry</span><span class="o">.</span><span class="i">Lat</span>
          <span class="i">Longitude</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs101', 240)" onmouseover="showTip(event, 'fs101', 240)" class="f">float</span> <span onmouseout="hideTip(event, 'fs115', 241)" onmouseover="showTip(event, 'fs115', 241)" class="i">result</span><span class="o">.</span><span class="i">Geometry</span><span class="o">.</span><span class="i">Lng</span>
          <span class="i">City</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs115', 242)" onmouseover="showTip(event, 'fs115', 242)" class="i">result</span><span class="o">.</span><span class="i">Components</span><span class="o">.</span><span class="i">City</span>
          <span class="i">State</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs115', 243)" onmouseover="showTip(event, 'fs115', 243)" class="i">result</span><span class="o">.</span><span class="i">Components</span><span class="o">.</span><span class="i">State</span>
          <span class="i">Country</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs115', 244)" onmouseover="showTip(event, 'fs115', 244)" class="i">result</span><span class="o">.</span><span class="i">Components</span><span class="o">.</span><span class="i">Country</span>
          <span class="i">CountryCode</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs115', 245)" onmouseover="showTip(event, 'fs115', 245)" class="i">result</span><span class="o">.</span><span class="i">Components</span><span class="o">.</span><span class="i">Iso31661Alpha2</span>
          <span class="i">EnergyUse</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs116', 246)" onmouseover="showTip(event, 'fs116', 246)" class="p">None</span> }
    ]
</code></pre></td>
</tr>
</table>
<aside class="notes">
Here I've defined transformSimple, a version of our transform function<br/>
that doesn't populate the EnergyUse property. More on that in a bit.<br/>
This is not all that complex, and that's really the beauty of using<br/>
F# for this type of work. Translations are simple functions mapping<br/>
one type to another.<br/>
</aside>
</section>
<section >
<h3>World Bank Data</h3>
<aside class="notes">
However, we want additional data about energy use for the location.<br/>
Let's use the World Bank type provider to look up energy use for the<br/>
country location to demonstrate a) the ability to mix data sets from<br/>
different sources easily and b) provide something more useful than<br/>
simple location data for our ETL application.<br/>
</aside>
</section>
<section >
<h3>Define <code>transform</code></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs117', 247)" onmouseover="showTip(event, 'fs117', 247)" class="f">extractEnergyUse</span> (<span onmouseout="hideTip(event, 'fs118', 248)" onmouseover="showTip(event, 'fs118', 248)" class="i">result</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs91', 249)" onmouseover="showTip(event, 'fs91', 249)" class="i">Location</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs119', 250)" onmouseover="showTip(event, 'fs119', 250)" class="i">Result</span>)
        (<span onmouseout="hideTip(event, 'fs120', 251)" onmouseover="showTip(event, 'fs120', 251)" class="i">wb</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs121', 252)" onmouseover="showTip(event, 'fs121', 252)" class="i">WorldBankData</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs122', 253)" onmouseover="showTip(event, 'fs122', 253)" class="i">ServiceTypes</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs123', 254)" onmouseover="showTip(event, 'fs123', 254)" class="t">WorldBankDataService</span>) <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs120', 255)" onmouseover="showTip(event, 'fs120', 255)" class="i">wb</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs124', 256)" onmouseover="showTip(event, 'fs124', 256)" class="i">Countries</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs125', 257)" onmouseover="showTip(event, 'fs125', 257)" class="t">Seq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs126', 258)" onmouseover="showTip(event, 'fs126', 258)" class="f">tryFind</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs127', 259)" onmouseover="showTip(event, 'fs127', 259)" class="i">x</span> <span class="k">-&gt;</span>
        <span onmouseout="hideTip(event, 'fs118', 260)" onmouseover="showTip(event, 'fs118', 260)" class="i">result</span><span class="o">.</span><span class="i">Components</span><span class="o">.</span><span class="i">Country</span><span class="o">.</span><span class="i">StartsWith</span>(<span onmouseout="hideTip(event, 'fs127', 261)" onmouseover="showTip(event, 'fs127', 261)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs128', 262)" onmouseover="showTip(event, 'fs128', 262)" class="i">Name</span>))
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs129', 263)" onmouseover="showTip(event, 'fs129', 263)" class="t">Option</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs130', 264)" onmouseover="showTip(event, 'fs130', 264)" class="f">map</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs127', 265)" onmouseover="showTip(event, 'fs127', 265)" class="i">x</span> <span class="k">-&gt;</span>
        <span onmouseout="hideTip(event, 'fs127', 266)" onmouseover="showTip(event, 'fs127', 266)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs131', 267)" onmouseover="showTip(event, 'fs131', 267)" class="i">Indicators</span><span class="o">.</span><span class="i">``Energy use (kg of oil equivalent per capita)``</span>)

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs132', 268)" onmouseover="showTip(event, 'fs132', 268)" class="f">transform</span> (<span onmouseout="hideTip(event, 'fs113', 269)" onmouseover="showTip(event, 'fs113', 269)" class="i">source</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs91', 270)" onmouseover="showTip(event, 'fs91', 270)" class="i">Location</span><span class="o">.</span><span class="i">Root</span>) <span class="o">:</span> <span onmouseout="hideTip(event, 'fs97', 271)" onmouseover="showTip(event, 'fs97', 271)" class="t">LocationResult</span> <span onmouseout="hideTip(event, 'fs114', 272)" onmouseover="showTip(event, 'fs114', 272)" class="t">list</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs120', 273)" onmouseover="showTip(event, 'fs120', 273)" class="i">wb</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs121', 274)" onmouseover="showTip(event, 'fs121', 274)" class="t">WorldBankData</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs133', 275)" onmouseover="showTip(event, 'fs133', 275)" class="f">GetDataContext</span>()
    [ <span class="k">for</span> <span onmouseout="hideTip(event, 'fs115', 276)" onmouseover="showTip(event, 'fs115', 276)" class="i">result</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs113', 277)" onmouseover="showTip(event, 'fs113', 277)" class="i">source</span><span class="o">.</span><span class="i">Results</span> <span class="k">-&gt;</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs134', 278)" onmouseover="showTip(event, 'fs134', 278)" class="i">energyUse</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs117', 279)" onmouseover="showTip(event, 'fs117', 279)" class="f">extractEnergyUse</span> <span onmouseout="hideTip(event, 'fs115', 280)" onmouseover="showTip(event, 'fs115', 280)" class="i">result</span> <span onmouseout="hideTip(event, 'fs120', 281)" onmouseover="showTip(event, 'fs120', 281)" class="i">wb</span>
        { <span class="i">DisplayName</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs115', 282)" onmouseover="showTip(event, 'fs115', 282)" class="i">result</span><span class="o">.</span><span class="i">Formatted</span>
          <span class="i">Latitude</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs101', 283)" onmouseover="showTip(event, 'fs101', 283)" class="f">float</span> <span onmouseout="hideTip(event, 'fs115', 284)" onmouseover="showTip(event, 'fs115', 284)" class="i">result</span><span class="o">.</span><span class="i">Geometry</span><span class="o">.</span><span class="i">Lat</span>
          <span class="i">Longitude</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs101', 285)" onmouseover="showTip(event, 'fs101', 285)" class="f">float</span> <span onmouseout="hideTip(event, 'fs115', 286)" onmouseover="showTip(event, 'fs115', 286)" class="i">result</span><span class="o">.</span><span class="i">Geometry</span><span class="o">.</span><span class="i">Lng</span>
          <span class="i">City</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs115', 287)" onmouseover="showTip(event, 'fs115', 287)" class="i">result</span><span class="o">.</span><span class="i">Components</span><span class="o">.</span><span class="i">City</span>
          <span class="i">State</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs115', 288)" onmouseover="showTip(event, 'fs115', 288)" class="i">result</span><span class="o">.</span><span class="i">Components</span><span class="o">.</span><span class="i">State</span>
          <span class="i">Country</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs115', 289)" onmouseover="showTip(event, 'fs115', 289)" class="i">result</span><span class="o">.</span><span class="i">Components</span><span class="o">.</span><span class="i">Country</span>
          <span class="i">CountryCode</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs115', 290)" onmouseover="showTip(event, 'fs115', 290)" class="i">result</span><span class="o">.</span><span class="i">Components</span><span class="o">.</span><span class="i">Iso31661Alpha2</span>
          <span class="i">EnergyUse</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs134', 291)" onmouseover="showTip(event, 'fs134', 291)" class="i">energyUse</span> }
    ]
</code></pre></td>
</tr>
</table>
<aside class="notes">
The World Bank type provider already understands how to translate<br/>
HTTP requests from the World Bank and provides a number of indicators.<br/>
Define extractEnergyUse to retrieve World Bank indicators for each<br/>
result. We'll also parameterize the data context used to access<br/>
the World Bank so we don't have to re-create it for each request.<br/>
</aside>
</section>
<section >
<h3>Persisting Data</h3>
<aside class="notes">
You may typically use SQL databases when manipulating data, but we'll<br/>
use CSV for this exercise. Fortunately, FSharp.Data provides the CsvProvider<br/>
with which we can read from and create CSV files.<br/>
</aside>
</section>
<section >
<h3>CsvProvider</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs135', 292)" onmouseover="showTip(event, 'fs135', 292)" class="t">LocationSink</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs136', 293)" onmouseover="showTip(event, 'fs136', 293)" class="t">CsvProvider</span><span class="o">&lt;</span><span class="s">&quot;Location (string),Latitude (float),Longitude (float),City (string),State (string),Country (string),CountryCode (string)&quot;</span><span class="o">&gt;</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs137', 294)" onmouseover="showTip(event, 'fs137', 294)" class="t">EnergyUseSink</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs136', 295)" onmouseover="showTip(event, 'fs136', 295)" class="t">CsvProvider</span><span class="o">&lt;</span><span class="s">&quot;CountryCode (string),Year (int),EnergyUse (float)&quot;</span><span class="o">&gt;</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
You can find the full headers in the LocationSinkHeaders.txt and<br/>
EnergyUseSinkHeaders.txt files in the exercises folder.<br/>
</aside>
</section>
<section >
<h3>Define <code>load</code></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs138', 296)" onmouseover="showTip(event, 'fs138', 296)" class="f">load</span> (<span onmouseout="hideTip(event, 'fs139', 297)" onmouseover="showTip(event, 'fs139', 297)" class="i">data</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs97', 298)" onmouseover="showTip(event, 'fs97', 298)" class="t">LocationResult</span> <span onmouseout="hideTip(event, 'fs114', 299)" onmouseover="showTip(event, 'fs114', 299)" class="t">list</span>) <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs140', 300)" onmouseover="showTip(event, 'fs140', 300)" class="i">locations</span>, <span onmouseout="hideTip(event, 'fs141', 301)" onmouseover="showTip(event, 'fs141', 301)" class="i">energyUse</span> <span class="o">=</span>
        [ <span class="k">for</span> <span onmouseout="hideTip(event, 'fs142', 302)" onmouseover="showTip(event, 'fs142', 302)" class="i">row</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs139', 303)" onmouseover="showTip(event, 'fs139', 303)" class="i">data</span> <span class="k">-&gt;</span>
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs143', 304)" onmouseover="showTip(event, 'fs143', 304)" class="i">location</span> <span class="o">=</span>
                <span onmouseout="hideTip(event, 'fs135', 305)" onmouseover="showTip(event, 'fs135', 305)" class="t">LocationSink</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs144', 306)" onmouseover="showTip(event, 'fs144', 306)" class="t">Row</span>(
                    <span onmouseout="hideTip(event, 'fs142', 307)" onmouseover="showTip(event, 'fs142', 307)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs98', 308)" onmouseover="showTip(event, 'fs98', 308)" class="i">DisplayName</span>, <span onmouseout="hideTip(event, 'fs142', 309)" onmouseover="showTip(event, 'fs142', 309)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs100', 310)" onmouseover="showTip(event, 'fs100', 310)" class="i">Latitude</span>,
                    <span onmouseout="hideTip(event, 'fs142', 311)" onmouseover="showTip(event, 'fs142', 311)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs102', 312)" onmouseover="showTip(event, 'fs102', 312)" class="i">Longitude</span>, <span onmouseout="hideTip(event, 'fs142', 313)" onmouseover="showTip(event, 'fs142', 313)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs103', 314)" onmouseover="showTip(event, 'fs103', 314)" class="i">City</span>,
                    <span onmouseout="hideTip(event, 'fs142', 315)" onmouseover="showTip(event, 'fs142', 315)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs104', 316)" onmouseover="showTip(event, 'fs104', 316)" class="i">State</span>, <span onmouseout="hideTip(event, 'fs142', 317)" onmouseover="showTip(event, 'fs142', 317)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs105', 318)" onmouseover="showTip(event, 'fs105', 318)" class="i">Country</span>,
                    <span onmouseout="hideTip(event, 'fs142', 319)" onmouseover="showTip(event, 'fs142', 319)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs106', 320)" onmouseover="showTip(event, 'fs106', 320)" class="i">CountryCode</span>
                )
            <span class="k">let</span> <span onmouseout="hideTip(event, 'fs145', 321)" onmouseover="showTip(event, 'fs145', 321)" class="i">usage</span> <span class="o">=</span>
                <span class="k">match</span> <span onmouseout="hideTip(event, 'fs142', 322)" onmouseover="showTip(event, 'fs142', 322)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs107', 323)" onmouseover="showTip(event, 'fs107', 323)" class="i">EnergyUse</span> <span class="k">with</span>
                | <span onmouseout="hideTip(event, 'fs146', 324)" onmouseover="showTip(event, 'fs146', 324)" class="p">Some</span> <span onmouseout="hideTip(event, 'fs147', 325)" onmouseover="showTip(event, 'fs147', 325)" class="i">i</span> <span class="k">-&gt;</span>
                    [ <span class="k">for</span> <span onmouseout="hideTip(event, 'fs25', 326)" onmouseover="showTip(event, 'fs25', 326)" class="i">y</span> <span class="k">in</span> <span class="n">1960..</span><span class="n">2012</span> <span class="k">-&gt;</span>
                        <span onmouseout="hideTip(event, 'fs137', 327)" onmouseover="showTip(event, 'fs137', 327)" class="t">EnergyUseSink</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs148', 328)" onmouseover="showTip(event, 'fs148', 328)" class="t">Row</span>(<span onmouseout="hideTip(event, 'fs142', 329)" onmouseover="showTip(event, 'fs142', 329)" class="i">row</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs106', 330)" onmouseover="showTip(event, 'fs106', 330)" class="i">CountryCode</span>, <span onmouseout="hideTip(event, 'fs147', 331)" onmouseover="showTip(event, 'fs147', 331)" class="i">i</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs25', 332)" onmouseover="showTip(event, 'fs25', 332)" class="i">y</span>]) ]
                | <span onmouseout="hideTip(event, 'fs116', 333)" onmouseover="showTip(event, 'fs116', 333)" class="p">None</span> <span class="k">-&gt;</span> []
            <span onmouseout="hideTip(event, 'fs143', 334)" onmouseover="showTip(event, 'fs143', 334)" class="i">location</span>, <span onmouseout="hideTip(event, 'fs145', 335)" onmouseover="showTip(event, 'fs145', 335)" class="i">usage</span>
        ]
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs149', 336)" onmouseover="showTip(event, 'fs149', 336)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs150', 337)" onmouseover="showTip(event, 'fs150', 337)" class="f">unzip</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Once again, this is quite a lot of code in one snippet.<br/>
We are defining a list comprehension that traverses each<br/>
LocationResult and builds up pairs of LocationSink.Row and<br/>
EnergyUseSink.Row list results. We then unzip them to separate<br/>
the two lists.<br/>
</aside>
</section>
<section >
<h3>Define <code>load</code> (cont)</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">do</span>
        <span class="k">use</span> <span onmouseout="hideTip(event, 'fs151', 338)" onmouseover="showTip(event, 'fs151', 338)" class="i">locationSink</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs135', 339)" onmouseover="showTip(event, 'fs135', 339)" class="t">LocationSink</span>(<span onmouseout="hideTip(event, 'fs140', 340)" onmouseover="showTip(event, 'fs140', 340)" class="i">locations</span>)
        <span onmouseout="hideTip(event, 'fs151', 341)" onmouseover="showTip(event, 'fs151', 341)" class="i">locationSink</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs152', 342)" onmouseover="showTip(event, 'fs152', 342)" class="f">Save</span>(<span class="s">&quot;locations.csv&quot;</span>)
    <span class="k">do</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs153', 343)" onmouseover="showTip(event, 'fs153', 343)" class="i">distinct</span> <span class="o">=</span>
            <span onmouseout="hideTip(event, 'fs149', 344)" onmouseover="showTip(event, 'fs149', 344)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs154', 345)" onmouseover="showTip(event, 'fs154', 345)" class="f">concat</span> <span onmouseout="hideTip(event, 'fs141', 346)" onmouseover="showTip(event, 'fs141', 346)" class="i">energyUse</span>
            <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs149', 347)" onmouseover="showTip(event, 'fs149', 347)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs155', 348)" onmouseover="showTip(event, 'fs155', 348)" class="f">distinctBy</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs156', 349)" onmouseover="showTip(event, 'fs156', 349)" class="i">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs156', 350)" onmouseover="showTip(event, 'fs156', 350)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs106', 351)" onmouseover="showTip(event, 'fs106', 351)" class="i">CountryCode</span>)
        <span class="k">use</span> <span onmouseout="hideTip(event, 'fs157', 352)" onmouseover="showTip(event, 'fs157', 352)" class="i">energyUseSink</span> <span class="o">=</span> <span class="k">new</span> <span onmouseout="hideTip(event, 'fs137', 353)" onmouseover="showTip(event, 'fs137', 353)" class="t">EnergyUseSink</span>(<span onmouseout="hideTip(event, 'fs153', 354)" onmouseover="showTip(event, 'fs153', 354)" class="i">distinct</span>)
        <span onmouseout="hideTip(event, 'fs157', 355)" onmouseover="showTip(event, 'fs157', 355)" class="i">energyUseSink</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs152', 356)" onmouseover="showTip(event, 'fs152', 356)" class="f">Save</span>(<span class="s">&quot;energyUse.csv&quot;</span>)
</code></pre></td>
</tr>
</table>
<aside class="notes">
Now that we have the results, we need to create the CSV files.<br/>
We can load the row lists into their respective Sink types<br/>
and call Save, passing a file name.<br/>
For energyUse, since we may have multiple locations within the<br/>
same country, let's make sure to capture only distinct results<br/>
to avoid duplicates.<br/>
You would follow a similar approach when working with a SQL database.<br/>
</aside>
</section>
<section >
<h3>Define <code>run</code></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs158', 357)" onmouseover="showTip(event, 'fs158', 357)" class="f">run</span> <span onmouseout="hideTip(event, 'fs94', 358)" onmouseover="showTip(event, 'fs94', 358)" class="i">city</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs139', 359)" onmouseover="showTip(event, 'fs139', 359)" class="i">data</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs93', 360)" onmouseover="showTip(event, 'fs93', 360)" class="f">extract</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs132', 361)" onmouseover="showTip(event, 'fs132', 361)" class="f">transform</span>) <span onmouseout="hideTip(event, 'fs94', 362)" onmouseover="showTip(event, 'fs94', 362)" class="i">city</span>
    <span onmouseout="hideTip(event, 'fs138', 363)" onmouseover="showTip(event, 'fs138', 363)" class="f">load</span> <span onmouseout="hideTip(event, 'fs139', 364)" onmouseover="showTip(event, 'fs139', 364)" class="i">data</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Let's define a run function to make it easier to run everything together.<br/>
Try it out. What sort of results are you getting? Look at the CSV results.<br/>
Are they what you would expect?<br/>
You can run just the `let data = (extract >> transform) "City"` to see the<br/>
LocationResults directly.<br/>
</aside>
</section>
<section >
<h3>Iterating Design</h3>
<aside class="notes">
I'd like to point out at this point that this would be a good time to move<br/>
our types to a library .fs file. However, we will leave them here for now.<br/>
</aside>
</section>
<section >
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
</section>
</section>
<section >
<section >
<h2>Testing</h2>
<aside class="notes">
Let's take an opportunity to test our code. There are multiple kinds of tests,<br/>
and we'll start with some simple performance testing. This won't be anything<br/>
spectacular; we'll simply leverage a directive available in F# Interactive.<br/>
</aside>
</section>
<section >
<h3><code>#time</code></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">&gt;</span> #<span class="i">time</span>;;

<span class="o">--&gt;</span> <span class="i">Timing</span> <span class="i">now</span> <span class="i">on</span>

<span class="o">&gt;</span> <span class="i">run</span> <span class="s">&quot;Houston&quot;</span>;;
<span class="i">Real</span><span class="o">:</span> <span class="n">00</span><span class="o">:</span><span class="n">00</span><span class="o">:</span><span class="n">00.970</span>, <span class="i">CPU</span><span class="o">:</span> <span class="n">00</span><span class="o">:</span><span class="n">00</span><span class="o">:</span><span class="n">00.093</span>, <span class="i">GC</span> <span class="i">gen0</span><span class="o">:</span> <span class="n">1</span>, <span class="i">gen1</span><span class="o">:</span> <span class="n">0</span>, <span class="i">gen2</span><span class="o">:</span> <span class="n">0</span>
<span class="k">val</span> <span class="i">it</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs19', 365)" onmouseover="showTip(event, 'fs19', 365)" class="i">unit</span> <span class="o">=</span> ()

<span class="o">&gt;</span> #<span class="i">time</span>;;

<span class="o">--&gt;</span> <span class="i">Timing</span> <span class="i">now</span> <span class="i">off</span>

<span class="o">&gt;</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
There are multiple kinds of tests,<br/>
and we'll start with some simple performance testing. This won't be anything<br/>
spectacular; we'll simply leverage a directive available in F# Interactive.<br/>
</aside>
</section>
<section >
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
</section>
<section >
<h3>Unit Testing with xUnit.net</h3>
<aside class="notes">
This won't work well for scripts since xunit uses a separate test runner<br/>
that uses reflection to find tests using attributes.<br/>
</aside>
</section>
<section >
<p><img src="images/agony.png" alt="agony" /></p>
</section>
<section >
<h3>Unit Testing with NUnit</h3>
<aside class="notes">
See above.<br/>
</aside>
</section>
<section >
<p><img src="images/agony.png" alt="agony" /></p>
</section>
<section >
<h3>Unit Testing with Expecto</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#load</span> <span class="s">&quot;../.paket/load/net461/main.group.fsx&quot;</span>

<span class="k">open</span> <span onmouseout="hideTip(event, 'fs159', 366)" onmouseover="showTip(event, 'fs159', 366)" class="i">Expecto</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
At last, a testing library that will run in a script!<br/>
First, create a new file, Tests.fsx, then open Expecto.<br/>
</aside>
</section>
<section >
<h3>Write a Test</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs160', 367)" onmouseover="showTip(event, 'fs160', 367)" class="i">addTest</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs161', 368)" onmouseover="showTip(event, 'fs161', 368)" class="f">testCase</span> <span class="s">&quot;An addition test&quot;</span> <span class="o">&lt;|</span> <span class="k">fun</span> () <span class="k">-&gt;</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs162', 369)" onmouseover="showTip(event, 'fs162', 369)" class="i">expected</span> <span class="o">=</span> <span class="n">4</span>
        <span onmouseout="hideTip(event, 'fs163', 370)" onmouseover="showTip(event, 'fs163', 370)" class="t">Expect</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs164', 371)" onmouseover="showTip(event, 'fs164', 371)" class="f">equal</span> <span onmouseout="hideTip(event, 'fs162', 372)" onmouseover="showTip(event, 'fs162', 372)" class="i">expected</span> (<span class="n">2</span><span class="o">+</span><span class="n">2</span>) <span class="s">&quot;2+2 = 4&quot;</span>

<span onmouseout="hideTip(event, 'fs165', 373)" onmouseover="showTip(event, 'fs165', 373)" class="t">Tests</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs166', 374)" onmouseover="showTip(event, 'fs166', 374)" class="f">runTests</span> <span onmouseout="hideTip(event, 'fs167', 375)" onmouseover="showTip(event, 'fs167', 375)" class="i">defaultConfig</span> <span onmouseout="hideTip(event, 'fs160', 376)" onmouseover="showTip(event, 'fs160', 376)" class="i">addTest</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">[<span class="n">15</span><span class="o">:</span><span class="n">21</span><span class="o">:</span><span class="n">46</span> <span class="i">INF</span>] <span class="i">EXPECTO</span><span class="o">?</span> <span class="i">Running</span> <span class="i">tests</span><span class="o">..</span><span class="o">.</span> <span class="o">&lt;</span><span class="i">Expecto</span><span class="o">&gt;</span>
[<span class="n">15</span><span class="o">:</span><span class="n">21</span><span class="o">:</span><span class="n">46</span> <span class="i">INF</span>] <span class="i">EXPECTO!</span> <span class="n">1</span> <span class="i">tests</span> <span class="i">run</span> <span class="k">in</span> <span class="n">00</span><span class="o">:</span><span class="n">00</span><span class="o">:</span><span class="n">00.0297663</span> 

<span class="k">val</span> <span class="i">it</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs17', 377)" onmouseover="showTip(event, 'fs17', 377)" class="i">int</span> <span class="o">=</span> <span class="n">0</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Let's start with a simple test. Well, that was easy. You define a testCase by<br/>
giving it a name and a function to run. You verify the expected result using<br/>
Expect.equal, which takes an expected value, the actual value, and a message<br/>
if the test case fails.<br/>
</aside>
</section>
<section >
<h3>Write a Failing Test</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs168', 378)" onmouseover="showTip(event, 'fs168', 378)" class="i">failTest</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs161', 379)" onmouseover="showTip(event, 'fs161', 379)" class="f">testCase</span> <span class="s">&quot;Failing test&quot;</span> <span class="o">&lt;|</span> <span class="k">fun</span> () <span class="k">-&gt;</span>
        <span onmouseout="hideTip(event, 'fs163', 380)" onmouseover="showTip(event, 'fs163', 380)" class="t">Expect</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs164', 381)" onmouseover="showTip(event, 'fs164', 381)" class="f">equal</span> <span class="n">1</span> <span class="n">2</span> <span class="s">&quot;1 &lt;&gt; 2&quot;</span>

<span onmouseout="hideTip(event, 'fs165', 382)" onmouseover="showTip(event, 'fs165', 382)" class="t">Tests</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs166', 383)" onmouseover="showTip(event, 'fs166', 383)" class="f">runTests</span> <span onmouseout="hideTip(event, 'fs167', 384)" onmouseover="showTip(event, 'fs167', 384)" class="i">defaultConfig</span> <span onmouseout="hideTip(event, 'fs168', 385)" onmouseover="showTip(event, 'fs168', 385)" class="i">failTest</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">[<span class="n">15</span><span class="o">:</span><span class="n">29</span><span class="o">:</span><span class="n">39</span> <span class="i">INF</span>] <span class="i">EXPECTO</span><span class="o">?</span> <span class="i">Running</span> <span class="i">tests</span><span class="o">..</span><span class="o">.</span> <span class="o">&lt;</span><span class="i">Expecto</span><span class="o">&gt;</span>
[<span class="n">15</span><span class="o">:</span><span class="n">29</span><span class="o">:</span><span class="n">39</span> <span class="i">ERR</span>] <span class="i">Failing</span> <span class="i">test</span> <span class="i">failed</span> <span class="k">in</span> <span class="n">00</span><span class="o">:</span><span class="n">00</span><span class="o">:</span><span class="n">00.0150000</span><span class="o">.</span>
<span class="n">1</span> <span class="o">&lt;&gt;</span> <span class="n">2.</span> <span class="i">Actual</span> <span class="i">value</span> <span class="i">was</span> <span class="n">1</span> <span class="i">but</span> <span class="i">had</span> <span class="i">expected</span> <span class="i">it</span> <span class="k">to</span> <span class="i">be</span> <span class="n">2.</span>
  <span class="i">s</span><span class="o">:</span>
 <span class="o">&lt;</span><span class="i">Expecto</span><span class="o">&gt;</span>
[<span class="n">15</span><span class="o">:</span><span class="n">29</span><span class="o">:</span><span class="n">39</span> <span class="i">INF</span>] <span class="i">EXPECTO!</span> <span class="n">1</span> <span class="i">tests</span> <span class="i">run</span> <span class="k">in</span> <span class="n">00</span><span class="o">:</span><span class="n">00</span><span class="o">:</span><span class="n">00.0270684</span> 

<span class="k">val</span> <span class="i">it</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs17', 386)" onmouseover="showTip(event, 'fs17', 386)" class="i">int</span> <span class="o">=</span> <span class="n">1</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Write a failing test. Here you can see the test case name and message in the output,<br/>
making it quite easy to identify the culprit. <br/>
</aside>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs169', 387)" onmouseover="showTip(event, 'fs169', 387)" class="i">multTest</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs161', 388)" onmouseover="showTip(event, 'fs161', 388)" class="f">testCase</span> <span class="s">&quot;A multiplication test&quot;</span> <span class="o">&lt;|</span> <span class="k">fun</span> () <span class="k">-&gt;</span>
        <span class="k">let</span> <span onmouseout="hideTip(event, 'fs162', 389)" onmouseover="showTip(event, 'fs162', 389)" class="i">expected</span> <span class="o">=</span> <span class="n">4</span>
        <span onmouseout="hideTip(event, 'fs163', 390)" onmouseover="showTip(event, 'fs163', 390)" class="t">Expect</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs164', 391)" onmouseover="showTip(event, 'fs164', 391)" class="f">equal</span> <span onmouseout="hideTip(event, 'fs162', 392)" onmouseover="showTip(event, 'fs162', 392)" class="i">expected</span> (<span class="n">2</span><span class="o">*</span><span class="n">2</span>) <span class="s">&quot;2*2 = 4&quot;</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs170', 393)" onmouseover="showTip(event, 'fs170', 393)" class="i">intTests</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs171', 394)" onmouseover="showTip(event, 'fs171', 394)" class="f">testList</span> <span class="s">&quot;Integer math tests&quot;</span> [
        <span onmouseout="hideTip(event, 'fs160', 395)" onmouseover="showTip(event, 'fs160', 395)" class="i">addTest</span>
        <span onmouseout="hideTip(event, 'fs169', 396)" onmouseover="showTip(event, 'fs169', 396)" class="i">multTest</span>
    ]

<span onmouseout="hideTip(event, 'fs165', 397)" onmouseover="showTip(event, 'fs165', 397)" class="t">Tests</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs166', 398)" onmouseover="showTip(event, 'fs166', 398)" class="f">runTests</span> <span onmouseout="hideTip(event, 'fs167', 399)" onmouseover="showTip(event, 'fs167', 399)" class="i">defaultConfig</span> <span onmouseout="hideTip(event, 'fs170', 400)" onmouseover="showTip(event, 'fs170', 400)" class="i">intTests</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">[<span class="n">15</span><span class="o">:</span><span class="n">27</span><span class="o">:</span><span class="n">37</span> <span class="i">INF</span>] <span class="i">EXPECTO</span><span class="o">?</span> <span class="i">Running</span> <span class="i">tests</span><span class="o">..</span><span class="o">.</span> <span class="o">&lt;</span><span class="i">Expecto</span><span class="o">&gt;</span>
[<span class="n">15</span><span class="o">:</span><span class="n">27</span><span class="o">:</span><span class="n">37</span> <span class="i">INF</span>] <span class="i">EXPECTO!</span> <span class="n">2</span> <span class="i">tests</span> <span class="i">run</span> <span class="k">in</span> <span class="n">00</span><span class="o">:</span><span class="n">00</span><span class="o">:</span><span class="n">00.0019015</span> 

<span class="k">val</span> <span class="i">it</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs17', 401)" onmouseover="showTip(event, 'fs17', 401)" class="i">int</span> <span class="o">=</span> <span class="n">0</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
In Expecto, tests are values, and you can group them and run them in their groups.<br/>
</aside>
</section>
<section >
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
</section>
<section >
<h3>FsCheck</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs172', 402)" onmouseover="showTip(event, 'fs172', 402)" class="i">config</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs173', 403)" onmouseover="showTip(event, 'fs173', 403)" class="t">FsCheckConfig</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs174', 404)" onmouseover="showTip(event, 'fs174', 404)" class="i">defaultConfig</span> <span class="k">with</span> <span class="i">maxTest</span> <span class="o">=</span> <span class="n">10000</span> }

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs175', 405)" onmouseover="showTip(event, 'fs175', 405)" class="i">properties</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs171', 406)" onmouseover="showTip(event, 'fs171', 406)" class="f">testList</span> <span class="s">&quot;FsCheck samples&quot;</span> [
        <span onmouseout="hideTip(event, 'fs176', 407)" onmouseover="showTip(event, 'fs176', 407)" class="f">testProperty</span> <span class="s">&quot;Addition is commutative&quot;</span> <span class="o">&lt;|</span> <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs177', 408)" onmouseover="showTip(event, 'fs177', 408)" class="i">a</span> <span onmouseout="hideTip(event, 'fs178', 409)" onmouseover="showTip(event, 'fs178', 409)" class="i">b</span> <span class="k">-&gt;</span>
            <span onmouseout="hideTip(event, 'fs177', 410)" onmouseover="showTip(event, 'fs177', 410)" class="i">a</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs178', 411)" onmouseover="showTip(event, 'fs178', 411)" class="i">b</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs178', 412)" onmouseover="showTip(event, 'fs178', 412)" class="i">b</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs177', 413)" onmouseover="showTip(event, 'fs177', 413)" class="i">a</span>

        <span onmouseout="hideTip(event, 'fs176', 414)" onmouseover="showTip(event, 'fs176', 414)" class="f">testProperty</span> <span class="s">&quot;Reverse of reverse of a list is the original list&quot;</span> <span class="o">&lt;|</span>
            <span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs179', 415)" onmouseover="showTip(event, 'fs179', 415)" class="i">xs</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs114', 416)" onmouseover="showTip(event, 'fs114', 416)" class="t">list</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs17', 417)" onmouseover="showTip(event, 'fs17', 417)" class="t">int</span><span class="o">&gt;</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs149', 418)" onmouseover="showTip(event, 'fs149', 418)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs180', 419)" onmouseover="showTip(event, 'fs180', 419)" class="f">rev</span> (<span onmouseout="hideTip(event, 'fs149', 420)" onmouseover="showTip(event, 'fs149', 420)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs180', 421)" onmouseover="showTip(event, 'fs180', 421)" class="f">rev</span> <span onmouseout="hideTip(event, 'fs179', 422)" onmouseover="showTip(event, 'fs179', 422)" class="i">xs</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs179', 423)" onmouseover="showTip(event, 'fs179', 423)" class="i">xs</span>

        <span class="c">// you can also override the FsCheck config</span>
        <span onmouseout="hideTip(event, 'fs181', 424)" onmouseover="showTip(event, 'fs181', 424)" class="f">testPropertyWithConfig</span> <span onmouseout="hideTip(event, 'fs172', 425)" onmouseover="showTip(event, 'fs172', 425)" class="i">config</span> <span class="s">&quot;Product is distributive over addition&quot;</span> <span class="o">&lt;|</span>
            <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs177', 426)" onmouseover="showTip(event, 'fs177', 426)" class="i">a</span> <span onmouseout="hideTip(event, 'fs178', 427)" onmouseover="showTip(event, 'fs178', 427)" class="i">b</span> <span onmouseout="hideTip(event, 'fs182', 428)" onmouseover="showTip(event, 'fs182', 428)" class="i">c</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs177', 429)" onmouseover="showTip(event, 'fs177', 429)" class="i">a</span> <span class="o">*</span> (<span onmouseout="hideTip(event, 'fs178', 430)" onmouseover="showTip(event, 'fs178', 430)" class="i">b</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs182', 431)" onmouseover="showTip(event, 'fs182', 431)" class="i">c</span>) <span class="o">=</span> <span onmouseout="hideTip(event, 'fs177', 432)" onmouseover="showTip(event, 'fs177', 432)" class="i">a</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs178', 433)" onmouseover="showTip(event, 'fs178', 433)" class="i">b</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs177', 434)" onmouseover="showTip(event, 'fs177', 434)" class="i">a</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs182', 435)" onmouseover="showTip(event, 'fs182', 435)" class="i">c</span>
    ]

<span onmouseout="hideTip(event, 'fs165', 436)" onmouseover="showTip(event, 'fs165', 436)" class="t">Tests</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs166', 437)" onmouseover="showTip(event, 'fs166', 437)" class="f">runTests</span> <span onmouseout="hideTip(event, 'fs167', 438)" onmouseover="showTip(event, 'fs167', 438)" class="i">defaultConfig</span> <span onmouseout="hideTip(event, 'fs175', 439)" onmouseover="showTip(event, 'fs175', 439)" class="i">properties</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">[<span class="n">15</span><span class="o">:</span><span class="n">33</span><span class="o">:</span><span class="n">04</span> <span class="i">INF</span>] <span class="i">EXPECTO</span><span class="o">?</span> <span class="i">Running</span> <span class="i">tests</span><span class="o">..</span><span class="o">.</span> <span class="o">&lt;</span><span class="i">Expecto</span><span class="o">&gt;</span>
[<span class="n">15</span><span class="o">:</span><span class="n">33</span><span class="o">:</span><span class="n">04</span> <span class="i">INF</span>] <span class="i">EXPECTO!</span> <span class="n">3</span> <span class="i">tests</span> <span class="i">run</span> <span class="k">in</span> <span class="n">00</span><span class="o">:</span><span class="n">00</span><span class="o">:</span><span class="n">00.1008472</span> 
</code></pre></td>
</tr>
</table>
</section>
<section >
<h3>Group testLists</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs183', 440)" onmouseover="showTip(event, 'fs183', 440)" class="i">allTests</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs171', 441)" onmouseover="showTip(event, 'fs171', 441)" class="f">testList</span> <span class="s">&quot;all tests&quot;</span> [
        <span onmouseout="hideTip(event, 'fs170', 442)" onmouseover="showTip(event, 'fs170', 442)" class="i">intTests</span>
        <span onmouseout="hideTip(event, 'fs175', 443)" onmouseover="showTip(event, 'fs175', 443)" class="i">properties</span>
    ]

<span onmouseout="hideTip(event, 'fs165', 444)" onmouseover="showTip(event, 'fs165', 444)" class="t">Tests</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs166', 445)" onmouseover="showTip(event, 'fs166', 445)" class="f">runTests</span> <span onmouseout="hideTip(event, 'fs167', 446)" onmouseover="showTip(event, 'fs167', 446)" class="i">defaultConfig</span> <span onmouseout="hideTip(event, 'fs183', 447)" onmouseover="showTip(event, 'fs183', 447)" class="i">allTests</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">[<span class="n">15</span><span class="o">:</span><span class="n">34</span><span class="o">:</span><span class="n">09</span> <span class="i">INF</span>] <span class="i">EXPECTO</span><span class="o">?</span> <span class="i">Running</span> <span class="i">tests</span><span class="o">..</span><span class="o">.</span> <span class="o">&lt;</span><span class="i">Expecto</span><span class="o">&gt;</span>
[<span class="n">15</span><span class="o">:</span><span class="n">34</span><span class="o">:</span><span class="n">09</span> <span class="i">INF</span>] <span class="i">EXPECTO!</span> <span class="n">5</span> <span class="i">tests</span> <span class="i">run</span> <span class="k">in</span> <span class="n">00</span><span class="o">:</span><span class="n">00</span><span class="o">:</span><span class="n">00.1008795</span> 
</code></pre></td>
</tr>
</table>
<aside class="notes">
Lastly, you can even group lists of tests and run them all together.<br/>
</aside>
</section>
<section >
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
</section>
<section >
<h3>Write some tests!</h3>
<aside class="notes">
Take a few minutes to write a few tests for the ETL functions we just wrote.<br/>
Given we used type providers, it may be difficult to think through what tests<br/>
to write. There's no correct answer. You may want to verify the CSV files were<br/>
written or that the transform function returned 1 or more results.<br/>
Don't forget to #load "App.fsx"!<br/>
</aside>
</section>
</section>
<section >
<section >
<h2>Visualizing Data Sets</h2>
<h3><a href="https://tahahachana.github.io/XPlot/">XPlot</a></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs184', 448)" onmouseover="showTip(event, 'fs184', 448)" class="i">XPlot</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs185', 449)" onmouseover="showTip(event, 'fs185', 449)" class="i">GoogleCharts</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
One of the benefits of scripts is being able to print out charts.<br/>
XPlot provides several options, including GoogleCharts and Plotly.<br/>
We'll use the GoogleCharts library for our sample app.<br/>
</aside>
</section>
<section >
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
</section>
<section >
<h3>Show Locations</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs186', 450)" onmouseover="showTip(event, 'fs186', 450)" class="f">showMap</span> (<span onmouseout="hideTip(event, 'fs139', 451)" onmouseover="showTip(event, 'fs139', 451)" class="i">data</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs97', 452)" onmouseover="showTip(event, 'fs97', 452)" class="t">LocationResult</span> <span onmouseout="hideTip(event, 'fs114', 453)" onmouseover="showTip(event, 'fs114', 453)" class="t">list</span>) <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs139', 454)" onmouseover="showTip(event, 'fs139', 454)" class="i">data</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs149', 455)" onmouseover="showTip(event, 'fs149', 455)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs187', 456)" onmouseover="showTip(event, 'fs187', 456)" class="f">map</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs156', 457)" onmouseover="showTip(event, 'fs156', 457)" class="i">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs156', 458)" onmouseover="showTip(event, 'fs156', 458)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs100', 459)" onmouseover="showTip(event, 'fs100', 459)" class="i">Latitude</span>, <span onmouseout="hideTip(event, 'fs156', 460)" onmouseover="showTip(event, 'fs156', 460)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs102', 461)" onmouseover="showTip(event, 'fs102', 461)" class="i">Longitude</span>, <span onmouseout="hideTip(event, 'fs156', 462)" onmouseover="showTip(event, 'fs156', 462)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs98', 463)" onmouseover="showTip(event, 'fs98', 463)" class="i">DisplayName</span>)
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs188', 464)" onmouseover="showTip(event, 'fs188', 464)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs189', 465)" onmouseover="showTip(event, 'fs189', 465)" class="f">Map</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs188', 466)" onmouseover="showTip(event, 'fs188', 466)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs190', 467)" onmouseover="showTip(event, 'fs190', 467)" class="f">WithOptions</span> (<span onmouseout="hideTip(event, 'fs191', 468)" onmouseover="showTip(event, 'fs191', 468)" class="t">Options</span>(<span class="i">showTip</span> <span class="o">=</span> <span class="k">true</span>))
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs188', 469)" onmouseover="showTip(event, 'fs188', 469)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs192', 470)" onmouseover="showTip(event, 'fs192', 470)" class="f">WithHeight</span> <span class="n">420</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs188', 471)" onmouseover="showTip(event, 'fs188', 471)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs193', 472)" onmouseover="showTip(event, 'fs193', 472)" class="f">Show</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Call showMap.<br/>
Since we are retrieving one or more location results, let's show them on a map.<br/>
It's easier for the human mind to comprehend a visualization rather than a table<br/>
of data, so rendering a chart can quickly help you zero in on the objective<br/>
of the search.<br/>
Using data you've retrieved from the transform function, call the showMap function.<br/>
What do you see? <br/>
</aside>
</section>
<section >
<h4>Energy Use per Country</h4>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs194', 473)" onmouseover="showTip(event, 'fs194', 473)" class="f">showEnergyUse</span> (<span onmouseout="hideTip(event, 'fs139', 474)" onmouseover="showTip(event, 'fs139', 474)" class="i">data</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs97', 475)" onmouseover="showTip(event, 'fs97', 475)" class="t">LocationResult</span> <span onmouseout="hideTip(event, 'fs114', 476)" onmouseover="showTip(event, 'fs114', 476)" class="t">list</span>) <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs195', 477)" onmouseover="showTip(event, 'fs195', 477)" class="i">labels</span>, <span onmouseout="hideTip(event, 'fs196', 478)" onmouseover="showTip(event, 'fs196', 478)" class="i">plots</span> <span class="o">=</span>
        <span onmouseout="hideTip(event, 'fs139', 479)" onmouseover="showTip(event, 'fs139', 479)" class="i">data</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs149', 480)" onmouseover="showTip(event, 'fs149', 480)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs197', 481)" onmouseover="showTip(event, 'fs197', 481)" class="f">choose</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs156', 482)" onmouseover="showTip(event, 'fs156', 482)" class="i">x</span> <span class="k">-&gt;</span>
            <span class="k">match</span> <span onmouseout="hideTip(event, 'fs156', 483)" onmouseover="showTip(event, 'fs156', 483)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs107', 484)" onmouseover="showTip(event, 'fs107', 484)" class="i">EnergyUse</span> <span class="k">with</span>
            | <span onmouseout="hideTip(event, 'fs146', 485)" onmouseover="showTip(event, 'fs146', 485)" class="p">Some</span> <span onmouseout="hideTip(event, 'fs198', 486)" onmouseover="showTip(event, 'fs198', 486)" class="i">energyUse</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs146', 487)" onmouseover="showTip(event, 'fs146', 487)" class="p">Some</span>(<span onmouseout="hideTip(event, 'fs156', 488)" onmouseover="showTip(event, 'fs156', 488)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs105', 489)" onmouseover="showTip(event, 'fs105', 489)" class="i">Country</span>, <span onmouseout="hideTip(event, 'fs198', 490)" onmouseover="showTip(event, 'fs198', 490)" class="i">energyUse</span>)
            | <span onmouseout="hideTip(event, 'fs116', 491)" onmouseover="showTip(event, 'fs116', 491)" class="p">None</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs116', 492)" onmouseover="showTip(event, 'fs116', 492)" class="p">None</span>)
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs149', 493)" onmouseover="showTip(event, 'fs149', 493)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs155', 494)" onmouseover="showTip(event, 'fs155', 494)" class="f">distinctBy</span> <span onmouseout="hideTip(event, 'fs199', 495)" onmouseover="showTip(event, 'fs199', 495)" class="f">fst</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs149', 496)" onmouseover="showTip(event, 'fs149', 496)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs187', 497)" onmouseover="showTip(event, 'fs187', 497)" class="f">map</span> (<span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs200', 498)" onmouseover="showTip(event, 'fs200', 498)" class="i">country</span>, <span onmouseout="hideTip(event, 'fs198', 499)" onmouseover="showTip(event, 'fs198', 499)" class="i">energyUse</span>) <span class="k">-&gt;</span>
            <span onmouseout="hideTip(event, 'fs200', 500)" onmouseover="showTip(event, 'fs200', 500)" class="i">country</span>, [<span class="k">for</span> <span onmouseout="hideTip(event, 'fs25', 501)" onmouseover="showTip(event, 'fs25', 501)" class="i">y</span> <span class="k">in</span> <span class="n">1960..</span><span class="n">2010</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs99', 502)" onmouseover="showTip(event, 'fs99', 502)" class="f">string</span> <span onmouseout="hideTip(event, 'fs25', 503)" onmouseover="showTip(event, 'fs25', 503)" class="i">y</span>, <span onmouseout="hideTip(event, 'fs198', 504)" onmouseover="showTip(event, 'fs198', 504)" class="i">energyUse</span><span class="o">.</span>[<span onmouseout="hideTip(event, 'fs25', 505)" onmouseover="showTip(event, 'fs25', 505)" class="i">y</span>]])
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs149', 506)" onmouseover="showTip(event, 'fs149', 506)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs150', 507)" onmouseover="showTip(event, 'fs150', 507)" class="f">unzip</span>
    <span onmouseout="hideTip(event, 'fs196', 508)" onmouseover="showTip(event, 'fs196', 508)" class="i">plots</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs188', 509)" onmouseover="showTip(event, 'fs188', 509)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs201', 510)" onmouseover="showTip(event, 'fs201', 510)" class="f">Line</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs188', 511)" onmouseover="showTip(event, 'fs188', 511)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs190', 512)" onmouseover="showTip(event, 'fs190', 512)" class="f">WithOptions</span> (<span onmouseout="hideTip(event, 'fs191', 513)" onmouseover="showTip(event, 'fs191', 513)" class="t">Options</span>(<span class="i">title</span> <span class="o">=</span> <span class="s">&quot;Energy use per capita&quot;</span>))
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs188', 514)" onmouseover="showTip(event, 'fs188', 514)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs202', 515)" onmouseover="showTip(event, 'fs202', 515)" class="f">WithLabels</span> <span onmouseout="hideTip(event, 'fs195', 516)" onmouseover="showTip(event, 'fs195', 516)" class="i">labels</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs188', 517)" onmouseover="showTip(event, 'fs188', 517)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs193', 518)" onmouseover="showTip(event, 'fs193', 518)" class="f">Show</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Next, let's write a function that will take the energy use data we<br/>
retrieved and render it in a line graph.<br/>
</aside>
</section>
<section >
<aside class="notes">
Custom Printers<br/>
</aside>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs203', 519)" onmouseover="showTip(event, 'fs203', 519)" class="i">fsi</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs204', 520)" onmouseover="showTip(event, 'fs204', 520)" class="f">AddPrinter</span>(<span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs205', 521)" onmouseover="showTip(event, 'fs205', 521)" class="i">chart</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs184', 522)" onmouseover="showTip(event, 'fs184', 522)" class="i">XPlot</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs185', 523)" onmouseover="showTip(event, 'fs185', 523)" class="i">GoogleCharts</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs206', 524)" onmouseover="showTip(event, 'fs206', 524)" class="t">GoogleChart</span>) <span class="k">-&gt;</span>
   <span onmouseout="hideTip(event, 'fs205', 525)" onmouseover="showTip(event, 'fs205', 525)" class="i">chart</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs188', 526)" onmouseover="showTip(event, 'fs188', 526)" class="t">Chart</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs193', 527)" onmouseover="showTip(event, 'fs193', 527)" class="f">Show</span>
   <span class="s">&quot;Google Chart&quot;</span>)
</code></pre></td>
</tr>
</table>
<aside class="notes">
F# Interactive allows you to define custom printers. These are most<br/>
common in validating data sets and UIs. We can now remove the calls<br/>
to Chart.Show above, so long as the chart is the last thing returned.<br/>
</aside>
</section>
<section >
<h3>Add show* to <code>run</code></h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs158', 528)" onmouseover="showTip(event, 'fs158', 528)" class="f">run</span> <span onmouseout="hideTip(event, 'fs94', 529)" onmouseover="showTip(event, 'fs94', 529)" class="i">city</span> <span class="o">=</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs139', 530)" onmouseover="showTip(event, 'fs139', 530)" class="i">data</span> <span class="o">=</span> (<span onmouseout="hideTip(event, 'fs93', 531)" onmouseover="showTip(event, 'fs93', 531)" class="f">extract</span> <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs132', 532)" onmouseover="showTip(event, 'fs132', 532)" class="f">transform</span>) <span onmouseout="hideTip(event, 'fs94', 533)" onmouseover="showTip(event, 'fs94', 533)" class="i">city</span>
    <span onmouseout="hideTip(event, 'fs138', 534)" onmouseover="showTip(event, 'fs138', 534)" class="f">load</span> <span onmouseout="hideTip(event, 'fs139', 535)" onmouseover="showTip(event, 'fs139', 535)" class="i">data</span>
    <span onmouseout="hideTip(event, 'fs186', 536)" onmouseover="showTip(event, 'fs186', 536)" class="f">showMap</span> <span onmouseout="hideTip(event, 'fs139', 537)" onmouseover="showTip(event, 'fs139', 537)" class="i">data</span>
    <span onmouseout="hideTip(event, 'fs194', 538)" onmouseover="showTip(event, 'fs194', 538)" class="f">showEnergyUse</span> <span onmouseout="hideTip(event, 'fs139', 539)" onmouseover="showTip(event, 'fs139', 539)" class="i">data</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Let's add this to our run function so that we plot out the charts whenever<br/>
the data set is retrieved. Make sure you restore the |> Chart.Show in the<br/>
show functions or they won't display.<br/>
This will act as a visual cue that we have the correct data set.<br/>
Feel free to add in any tests you created, as well.<br/>
Try entering different locations into your interactive session and report<br/>
on what you are seeing. "San Francisco" is quite interesting.<br/>
</aside>
</section>
</section>
<section >
<section >
<h2>Accessing Command Line Parameters</h2>
<aside class="notes">
We have not yet left scripts, yet we are also not done with our possibilities<br/>
for practically leveraging scripts. So far we have been running whatever is<br/>
defined in the script file. What if we want to run the script but parameterize<br/>
it from the command line?<br/>
</aside>
</section>
<section >
<h3>PowerShell Wrappers</h3>
<aside class="notes">
My company currently has several F# scripts that are wrapped by PowerShell.<br/>
The scripts work great, and we used PowerShell to provide better tab-completion.<br/>
The PowerShell works fine, but I wondered whether F# could do it all.<br/>
</aside>
</section>
<section >
<h3>Argu</h3>
<p><img src="images/argu-logo.png" alt="Argu" /></p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs207', 540)" onmouseover="showTip(event, 'fs207', 540)" class="i">Argu</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Argu is a terrific library that provides features for parsing command line arguments,<br/>
defining command line arguments, defining subcommands, and printing CLI help.<br/>
Arguu can also be used from a script file!<br/>
</aside>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs208', 541)" onmouseover="showTip(event, 'fs208', 541)" class="t">Arguments</span> <span class="o">=</span>
    | [&lt;<span onmouseout="hideTip(event, 'fs209', 542)" onmouseover="showTip(event, 'fs209', 542)" class="t">Mandatory</span>&gt;] <span onmouseout="hideTip(event, 'fs210', 543)" onmouseover="showTip(event, 'fs210', 543)" class="p">City</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs99', 544)" onmouseover="showTip(event, 'fs99', 544)" class="t">string</span>
    <span class="k">with</span>
    <span class="k">interface</span> <span onmouseout="hideTip(event, 'fs211', 545)" onmouseover="showTip(event, 'fs211', 545)" class="t">IArgParserTemplate</span> <span class="k">with</span>
        <span class="k">member</span> <span onmouseout="hideTip(event, 'fs212', 546)" onmouseover="showTip(event, 'fs212', 546)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs213', 547)" onmouseover="showTip(event, 'fs213', 547)" class="i">Usage</span> <span class="o">=</span>
            <span class="k">match</span> <span onmouseout="hideTip(event, 'fs212', 548)" onmouseover="showTip(event, 'fs212', 548)" class="i">this</span> <span class="k">with</span>
            | <span onmouseout="hideTip(event, 'fs210', 549)" onmouseover="showTip(event, 'fs210', 549)" class="p">City</span> _ <span class="k">-&gt;</span> <span class="s">&quot;Enter a location name&quot;</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Let's define the expected arguments. We expect a City that is of type string.<br/>
The City parameter is mandatory. By default, this translates to `--city` on the CLI.<br/>
The IArgParserTemplate is a required interface for working with Argu and provides<br/>
the content displayed in the --help.<br/>
</aside>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs214', 550)" onmouseover="showTip(event, 'fs214', 550)" class="f">runCLI</span> <span onmouseout="hideTip(event, 'fs215', 551)" onmouseover="showTip(event, 'fs215', 551)" class="i">args</span> <span class="o">=</span>
    <span class="c">//let args = [|&quot;Map.fsx&quot;;&quot;--city&quot;;&quot;Adelaide&quot;|].[1..]</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs216', 552)" onmouseover="showTip(event, 'fs216', 552)" class="i">argParser</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs217', 553)" onmouseover="showTip(event, 'fs217', 553)" class="t">ArgumentParser</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs218', 554)" onmouseover="showTip(event, 'fs218', 554)" class="f">Create</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs208', 555)" onmouseover="showTip(event, 'fs208', 555)" class="t">Arguments</span><span class="o">&gt;</span>(<span class="i">errorHandler</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs219', 556)" onmouseover="showTip(event, 'fs219', 556)" class="t">ProcessExiter</span>())
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs220', 557)" onmouseover="showTip(event, 'fs220', 557)" class="i">argResults</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs216', 558)" onmouseover="showTip(event, 'fs216', 558)" class="i">argParser</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs221', 559)" onmouseover="showTip(event, 'fs221', 559)" class="f">Parse</span>(<span onmouseout="hideTip(event, 'fs215', 560)" onmouseover="showTip(event, 'fs215', 560)" class="i">args</span>)
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs94', 561)" onmouseover="showTip(event, 'fs94', 561)" class="i">city</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs220', 562)" onmouseover="showTip(event, 'fs220', 562)" class="i">argResults</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs222', 563)" onmouseover="showTip(event, 'fs222', 563)" class="f">GetResult</span> &lt;@ <span onmouseout="hideTip(event, 'fs210', 564)" onmouseover="showTip(event, 'fs210', 564)" class="p">City</span> @&gt;
    <span onmouseout="hideTip(event, 'fs158', 565)" onmouseover="showTip(event, 'fs158', 565)" class="f">run</span> <span onmouseout="hideTip(event, 'fs94', 566)" onmouseover="showTip(event, 'fs94', 566)" class="i">city</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Next, let's use the Argu parser to extract values.<br/>
I'm defining the errorHandler as a ProcessHandler to shut down<br/>
any environments thtat break for some reason.<br/>
Ultimately, we want to retrieve the City value and pass it along<br/>
to run to execute our ETL and visualization code.<br/>
That is all well and good, but how do you retrieve the command line<br/>
arguments initially?<br/>
</aside>
</section>
<section >
<h3>fsi.CommandLineArgs</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs214', 567)" onmouseover="showTip(event, 'fs214', 567)" class="f">runCLI</span> <span onmouseout="hideTip(event, 'fs203', 568)" onmouseover="showTip(event, 'fs203', 568)" class="i">fsi</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs223', 569)" onmouseover="showTip(event, 'fs223', 569)" class="i">CommandLineArgs</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">$</span> <span class="i">fsharpi</span> <span class="i">exercises</span><span class="o">/</span><span class="i">App</span><span class="o">.</span><span class="i">fsx</span> <span class="o">--</span><span class="i">city</span> <span class="o">&#39;</span><span class="i">San</span> <span class="i">Francisco&#39;</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
You can access the command line args in a script using fsi.CommandLineArgs.<br/>
Try running our program above using runCLI fsi.CommandLineArgs<br/>
What do you get?<br/>
</aside>
</section>
<section >
<p><img src="images/agony.png" alt="agony" /></p>
</section>
<section >
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="i">ERROR</span><span class="o">:</span> <span class="i">unrecognized</span> <span class="i">argument</span><span class="o">:</span> <span class="o">&#39;</span><span class="o">.</span>
<span class="i">USAGE</span><span class="o">:</span> <span class="i">fsiAnyCPU</span><span class="o">.</span><span class="i">exe</span> [<span class="o">--</span><span class="i">help</span>] <span class="o">--</span><span class="i">city</span> <span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs20', 570)" onmouseover="showTip(event, 'fs20', 570)" class="i">string</span><span class="o">&gt;</span>

<span class="i">OPTIONS</span><span class="o">:</span>

    <span class="o">--</span><span class="i">city</span> <span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs20', 571)" onmouseover="showTip(event, 'fs20', 571)" class="i">string</span><span class="o">&gt;</span>       <span class="i">Enter</span> <span class="i">a</span> <span class="i">location</span> <span class="i">name</span>
    <span class="o">--</span><span class="i">help</span>                <span class="i">display</span> <span class="i">this</span> <span onmouseout="hideTip(event, 'fs114', 572)" onmouseover="showTip(event, 'fs114', 572)" class="i">list</span> <span class="k">of</span> <span class="i">options</span><span class="o">.</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
When you run your script like an application, the script file becomes<br/>
one of the arguments. So you need to strip this argument off the top.<br/>
</aside>
</section>
<section >
<h3>fsi.CommandLineArgs</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs224', 573)" onmouseover="showTip(event, 'fs224', 573)" class="i">args</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs203', 574)" onmouseover="showTip(event, 'fs203', 574)" class="i">fsi</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs223', 575)" onmouseover="showTip(event, 'fs223', 575)" class="i">CommandLineArgs</span><span class="o">.</span>[<span class="n">1..</span>]
<span onmouseout="hideTip(event, 'fs214', 576)" onmouseover="showTip(event, 'fs214', 576)" class="f">runCLI</span> <span onmouseout="hideTip(event, 'fs224', 577)" onmouseover="showTip(event, 'fs224', 577)" class="i">args</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
The fsi object has several useful properties, one of which is<br/>
`fsi.CommandLinArgs`. This can be used to retrieve the CLI args<br/>
for a script. However, make sure to trim off the first index,<br/>
as that should include the name of the file read<br/>
</aside>
</section>
<section >
<h3>Run App.fsx with --city</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">$</span> <span class="i">fsharpi</span> <span class="i">exercises</span><span class="o">/</span><span class="i">App</span><span class="o">.</span><span class="i">fsx</span> <span class="o">--</span><span class="i">city</span> <span class="i">Houston</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Run your script now? What do you see? You should see two graphs opened in<br/>
a web browser. You should also still see your generated CSV files.<br/>
</aside>
</section>
<section >
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
</section>
<section >
<h3>Paket.fsx</h3>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="prep">#load</span> <span class="s">&quot;../exercises/Paket.fsx&quot;</span>
<span onmouseout="hideTip(event, 'fs225', 578)" onmouseover="showTip(event, 'fs225', 578)" class="t">Paket</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs226', 579)" onmouseover="showTip(event, 'fs226', 579)" class="f">download</span>()
<span onmouseout="hideTip(event, 'fs225', 580)" onmouseover="showTip(event, 'fs225', 580)" class="t">Paket</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs227', 581)" onmouseover="showTip(event, 'fs227', 581)" class="f">restore</span>()
<span onmouseout="hideTip(event, 'fs225', 582)" onmouseover="showTip(event, 'fs225', 582)" class="t">Paket</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs228', 583)" onmouseover="showTip(event, 'fs228', 583)" class="f">generateLoadScripts</span> <span class="s">&quot;net461&quot;</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Take a look at exercises/Paket.fsx. Note that this exercises/ folder<br/>
has no special requirements except to verify that the script is valid. <br/>
The above commands wrap the paket.exe command line executable.<br/>
If we enter this toward the top of the script file, we will be able<br/>
to effectively deploy and run everything necessary to run the script.<br/>
<blockquote>
<p>Take this opportunity to re-run the entire script.<br/>
If you have correctly set your default paths, you should do so.<br/>
You  don't remember ever haing to figur.<br/>
</aside></p>
</blockquote>
</section>
<section >
<h3>End-to-end</h3>
<p>Remove:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="o">/</span><span class="i">scripting</span><span class="o">-</span><span class="i">workshop</span>
  <span class="o">/.</span><span class="i">paket</span>
    <span class="o">/</span><span class="i">load</span>
    <span class="o">-</span> <span class="i">paket</span><span class="o">.</span><span class="i">exe</span>
  <span class="o">/</span><span class="i">packages</span>
  <span class="o">/</span><span class="i">paket</span><span class="o">-</span><span class="i">files</span>
</code></pre></td>
</tr>
</table>
<p>Run: fsharpi ./exercises/App.fsx --client Adelaide</p>
<aside class="notes">
You can now specify the city from the command line. This allows us to<br/>
pull off program data and turn it into something that can restore<br/>
packages, generate load scripts, and run all within one script.<br/>
With the lines at the top of your script, you should be able to <br/>
delete <br/>
</aside>
</section>
<section >
<p><img src="images/ecstasy.png" alt="ecstasy" /></p>
</section>
</section>
<section >
<section >
<h2>DEMO</h2>
<h3>Using Scripts in a Project</h3>
</section>
<section >
<h3>Compiled or Interactive</h3>
<h4>Why choose?</h4>
<aside class="notes">
Trying to run code in F# interactive that has been written<br/>
as a compiled library or executable can sometimes be tricky.<br/>
We'll look at techniques to make this less difficult.<br/>
</aside>
</section>
</section>
<section >
<h2>DEMO</h2>
<h3>Debugging Scripts</h3>
</section>
<section >
<h2>DEMO</h2>
<h3>Build and Deploy Scripting with FAKE</h3>
</section>
<section >
<h1>Review</h1>
</section>
<section >
<h2>Deployment Options</h2>
<aside class="notes">
As noted earlier, we are not able to go into the details of each option, <br/>
but I want you at least be aware of some of the options available.<br/>
As an example, this slide deck is built using a FAKE script and FsReveal,<br/>
which uses FSharp.Formatting.<br/>
</aside>
<p><a href="http://fsprojects.github.io/FsReveal/"><img alt="FsReveal" src="images/logo.png" class="logo" /></a></p>
<p><a href="https://fake.build/"><img alt="FAKE" src="images/fake.png" class="logo" /></a></p>
<p><a href="http://bayardrock.github.io/IfSharp/"><img alt="Jupyter Notebooks" src="images/jupyter.png" class="logo" /></a></p>
<p><a href="https://blogs.msdn.microsoft.com/visualstudio/2016/12/05/azure-notebooks-now-support-f/"><img alt="Azure Notebooks" src="images/azure-notebooks.jpg" class="logo" /></a></p>
<p><a href="https://docs.microsoft.com/en-us/azure/azure-functions/functions-reference-fsharp"><img alt="Azure Functions" src="images/Azure-Functions-Logo.png" class="logo" /></a></p>
<p><a href="https://github.com/FSharpBristol/FSharp-Template-for-Aws-Lambda"><img alt="AWS Lambda" src="images/aws-lambda.png" class="logo" /></a></p>
</section>
<section >
<h1>Summary</h1>
<img alt="ecstasy" src="images/ecstasy.png" class="image-row" />
<img alt="agony" src="images/agony.png" class="image-row" />
<aside class="notes">
Review what we covered.<br/>
</aside>
</section>


        </div>
    </div>
    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script>
        // Add the nohighlight class and data-noescape attribute to code elements that have already been formatted by FSharp.Formatting
        $('pre.highlighted code').addClass('nohighlight').attr('data-noescape', '');

        // Full list of configuration options available here:
        // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            controls: true,
            progress: true,
            history: true,
            center: true,

            transition: 'default', // default/cube/page/concave/zoom/linear/fade/none

            // Parallax scrolling
            // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
            // parallaxBackgroundSize: '2100px 900px',

            // Optional libraries used to extend on reveal.js
            dependencies: [
                { src: 'lib/js/classList.js', condition: function () { return !document.body.classList; } },
                { src: 'plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: 'plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } },
                { src: 'plugin/zoom-js/zoom.js', async: true, condition: function () { return !!document.body.classList; } },
                { src: 'plugin/notes/notes.js', async: true, condition: function () { return !!document.body.classList; } }
            ]
        });

    </script>
</body>
</html>

